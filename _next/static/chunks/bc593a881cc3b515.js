(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,67881,91918,25913,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(20783),n=Symbol.for("react.lazy"),l=r[" use ".trim().toString()];function s(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===n&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}function o(e){var n;let o,i=(n=e,(o=r.forwardRef((e,t)=>{let{children:n,...o}=e;if(s(n)&&"function"==typeof l&&(n=l(n._payload)),r.isValidElement(n)){var i;let e,l,s=(i=n,(l=(e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.ref:(l=(e=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.props.ref:i.props.ref||i.ref),c=function(e,t){let r={...t};for(let a in t){let n=e[a],l=t[a];/^on[A-Z]/.test(a)?n&&l?r[a]=(...e)=>{let t=l(...e);return n(...e),t}:n&&(r[a]=n):"style"===a?r[a]={...n,...l}:"className"===a&&(r[a]=[n,l].filter(Boolean).join(" "))}return{...e,...r}}(o,n.props);return n.type!==r.Fragment&&(c.ref=t?(0,a.composeRefs)(t,s):s),r.cloneElement(n,c)}return r.Children.count(n)>1?r.Children.only(null):null})).displayName=`${n}.SlotClone`,o),c=r.forwardRef((e,a)=>{let{children:n,...o}=e;s(n)&&"function"==typeof l&&(n=l(n._payload));let c=r.Children.toArray(n),u=c.find(d);if(u){let e=u.props.children,n=c.map(t=>t!==u?t:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,t.jsx)(i,{...o,ref:a,children:r.isValidElement(e)?r.cloneElement(e,void 0,n):null})}return(0,t.jsx)(i,{...o,ref:a,children:n})});return c.displayName=`${e}.Slot`,c}var i=o("Slot"),c=Symbol("radix.slottable");function d(e){return r.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===c}e.s(["Slot",()=>i,"createSlot",()=>o],91918);var u=e.i(7670);let m=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,f=u.clsx,h=(e,t)=>r=>{var a;if((null==t?void 0:t.variants)==null)return f(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:n,defaultVariants:l}=t,s=Object.keys(n).map(e=>{let t=null==r?void 0:r[e],a=null==l?void 0:l[e];if(null===t)return null;let s=m(t)||m(a);return n[e][s]}),o=r&&Object.entries(r).reduce((e,t)=>{let[r,a]=t;return void 0===a||(e[r]=a),e},{});return f(e,s,null==t||null==(a=t.compoundVariants)?void 0:a.reduce((e,t)=>{let{class:r,className:a,...n}=t;return Object.entries(n).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...l,...o}[t]):({...l,...o})[t]===r})?[...e,r,a]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)};e.s(["cva",0,h],25913);var p=e.i(47163);let x=h("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),g=r.forwardRef(({className:e,variant:r,size:a,asChild:n=!1,...l},s)=>(0,t.jsx)(n?i:"button",{className:(0,p.cn)(x({variant:r,size:a,className:e})),ref:s,...l}));g.displayName="Button",e.s(["Button",()=>g],67881)},86318,e=>{"use strict";var t=e.i(71645);e.i(43476);var r=t.createContext(void 0);function a(e){let a=t.useContext(r);return e||a||"ltr"}e.s(["useDirection",()=>a])},70152,e=>{"use strict";function t(e,[t,r]){return Math.min(r,Math.max(t,e))}e.s(["clamp",()=>t])},70065,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(47163);let n=r.forwardRef(({className:e,...r},n)=>(0,t.jsx)("div",{ref:n,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));n.displayName="Card";let l=r.forwardRef(({className:e,...r},n)=>(0,t.jsx)("div",{ref:n,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...r}));l.displayName="CardHeader";let s=r.forwardRef(({className:e,...r},n)=>(0,t.jsx)("div",{ref:n,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));s.displayName="CardTitle";let o=r.forwardRef(({className:e,...r},n)=>(0,t.jsx)("div",{ref:n,className:(0,a.cn)("text-sm text-muted-foreground",e),...r}));o.displayName="CardDescription";let i=r.forwardRef(({className:e,...r},n)=>(0,t.jsx)("div",{ref:n,className:(0,a.cn)("p-6 pt-0",e),...r}));i.displayName="CardContent",r.forwardRef(({className:e,...r},n)=>(0,t.jsx)("div",{ref:n,className:(0,a.cn)("flex items-center p-6 pt-0",e),...r})).displayName="CardFooter",e.s(["Card",()=>n,"CardContent",()=>i,"CardDescription",()=>o,"CardHeader",()=>l,"CardTitle",()=>s])},29890,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(69464);let n=new Map([["bold",r.createElement(r.Fragment,null,r.createElement("path",{d:"M244,56v48a12,12,0,0,1-12,12H184a12,12,0,1,1,0-24H201.1l-19-17.38c-.13-.12-.26-.24-.38-.37A76,76,0,1,0,127,204h1a75.53,75.53,0,0,0,52.15-20.72,12,12,0,0,1,16.49,17.45A99.45,99.45,0,0,1,128,228h-1.37A100,100,0,1,1,198.51,57.06L220,76.72V56a12,12,0,0,1,24,0Z"}))],["duotone",r.createElement(r.Fragment,null,r.createElement("path",{d:"M216,128a88,88,0,1,1-88-88A88,88,0,0,1,216,128Z",opacity:"0.2"}),r.createElement("path",{d:"M240,56v48a8,8,0,0,1-8,8H184a8,8,0,0,1,0-16H211.4L184.81,71.64l-.25-.24a80,80,0,1,0-1.67,114.78,8,8,0,0,1,11,11.63A95.44,95.44,0,0,1,128,224h-1.32A96,96,0,1,1,195.75,60L224,85.8V56a8,8,0,1,1,16,0Z"}))],["fill",r.createElement(r.Fragment,null,r.createElement("path",{d:"M240,56v48a8,8,0,0,1-8,8H184a8,8,0,0,1-5.66-13.66l17-17-10.55-9.65-.25-.24a80,80,0,1,0-1.67,114.78,8,8,0,1,1,11,11.63A95.44,95.44,0,0,1,128,224h-1.32A96,96,0,1,1,195.75,60l10.93,10L226.34,50.3A8,8,0,0,1,240,56Z"}))],["light",r.createElement(r.Fragment,null,r.createElement("path",{d:"M238,56v48a6,6,0,0,1-6,6H184a6,6,0,0,1,0-12h32.55l-30.38-27.8c-.06-.06-.12-.13-.19-.19a82,82,0,1,0-1.7,117.65,6,6,0,0,1,8.24,8.73A93.46,93.46,0,0,1,128,222h-1.28A94,94,0,1,1,194.37,61.4L226,90.35V56a6,6,0,1,1,12,0Z"}))],["regular",r.createElement(r.Fragment,null,r.createElement("path",{d:"M240,56v48a8,8,0,0,1-8,8H184a8,8,0,0,1,0-16H211.4L184.81,71.64l-.25-.24a80,80,0,1,0-1.67,114.78,8,8,0,0,1,11,11.63A95.44,95.44,0,0,1,128,224h-1.32A96,96,0,1,1,195.75,60L224,85.8V56a8,8,0,1,1,16,0Z"}))],["thin",r.createElement(r.Fragment,null,r.createElement("path",{d:"M236,56v48a4,4,0,0,1-4,4H184a4,4,0,0,1,0-8h37.7L187.53,68.69l-.13-.12a84,84,0,1,0-1.75,120.51,4,4,0,0,1,5.5,5.82A91.43,91.43,0,0,1,128,220h-1.26A92,92,0,1,1,193,62.84l35,32.05V56a4,4,0,1,1,8,0Z"}))]]),l=r.forwardRef((e,t)=>r.createElement(a.default,{ref:t,...e,weights:n}));l.displayName="ArrowClockwiseIcon";let s=new Map([["bold",r.createElement(r.Fragment,null,r.createElement("path",{d:"M232.49,80.49l-128,128a12,12,0,0,1-17,0l-56-56a12,12,0,1,1,17-17L96,183,215.51,63.51a12,12,0,0,1,17,17Z"}))],["duotone",r.createElement(r.Fragment,null,r.createElement("path",{d:"M232,56V200a16,16,0,0,1-16,16H40a16,16,0,0,1-16-16V56A16,16,0,0,1,40,40H216A16,16,0,0,1,232,56Z",opacity:"0.2"}),r.createElement("path",{d:"M205.66,85.66l-96,96a8,8,0,0,1-11.32,0l-40-40a8,8,0,0,1,11.32-11.32L104,164.69l90.34-90.35a8,8,0,0,1,11.32,11.32Z"}))],["fill",r.createElement(r.Fragment,null,r.createElement("path",{d:"M216,40H40A16,16,0,0,0,24,56V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40ZM205.66,85.66l-96,96a8,8,0,0,1-11.32,0l-40-40a8,8,0,0,1,11.32-11.32L104,164.69l90.34-90.35a8,8,0,0,1,11.32,11.32Z"}))],["light",r.createElement(r.Fragment,null,r.createElement("path",{d:"M228.24,76.24l-128,128a6,6,0,0,1-8.48,0l-56-56a6,6,0,0,1,8.48-8.48L96,191.51,219.76,67.76a6,6,0,0,1,8.48,8.48Z"}))],["regular",r.createElement(r.Fragment,null,r.createElement("path",{d:"M229.66,77.66l-128,128a8,8,0,0,1-11.32,0l-56-56a8,8,0,0,1,11.32-11.32L96,188.69,218.34,66.34a8,8,0,0,1,11.32,11.32Z"}))],["thin",r.createElement(r.Fragment,null,r.createElement("path",{d:"M226.83,74.83l-128,128a4,4,0,0,1-5.66,0l-56-56a4,4,0,0,1,5.66-5.66L96,194.34,221.17,69.17a4,4,0,1,1,5.66,5.66Z"}))]]),o=r.forwardRef((e,t)=>r.createElement(a.default,{ref:t,...e,weights:s}));o.displayName="CheckIcon";let i=new Map([["bold",r.createElement(r.Fragment,null,r.createElement("path",{d:"M236,128a108,108,0,0,1-216,0c0-42.52,24.73-81.34,63-98.9A12,12,0,1,1,93,50.91C63.24,64.57,44,94.83,44,128a84,84,0,0,0,168,0c0-33.17-19.24-63.43-49-77.09A12,12,0,1,1,173,29.1C211.27,46.66,236,85.48,236,128Z"}))],["duotone",r.createElement(r.Fragment,null,r.createElement("path",{d:"M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z",opacity:"0.2"}),r.createElement("path",{d:"M232,128a104,104,0,0,1-208,0c0-41,23.81-78.36,60.66-95.27a8,8,0,0,1,6.68,14.54C60.15,61.59,40,93.27,40,128a88,88,0,0,0,176,0c0-34.73-20.15-66.41-51.34-80.73a8,8,0,0,1,6.68-14.54C208.19,49.64,232,87,232,128Z"}))],["fill",r.createElement(r.Fragment,null,r.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,176A72,72,0,0,1,92,65.64a8,8,0,0,1,8,13.85,56,56,0,1,0,56,0,8,8,0,0,1,8-13.85A72,72,0,0,1,128,200Z"}))],["light",r.createElement(r.Fragment,null,r.createElement("path",{d:"M230,128a102,102,0,0,1-204,0c0-40.18,23.35-76.86,59.5-93.45a6,6,0,0,1,5,10.9C58.61,60.09,38,92.49,38,128a90,90,0,0,0,180,0c0-35.51-20.61-67.91-52.5-82.55a6,6,0,0,1,5-10.9C206.65,51.14,230,87.82,230,128Z"}))],["regular",r.createElement(r.Fragment,null,r.createElement("path",{d:"M232,128a104,104,0,0,1-208,0c0-41,23.81-78.36,60.66-95.27a8,8,0,0,1,6.68,14.54C60.15,61.59,40,93.27,40,128a88,88,0,0,0,176,0c0-34.73-20.15-66.41-51.34-80.73a8,8,0,0,1,6.68-14.54C208.19,49.64,232,87,232,128Z"}))],["thin",r.createElement(r.Fragment,null,r.createElement("path",{d:"M228,128a100,100,0,0,1-200,0c0-39.4,22.9-75.37,58.33-91.63a4,4,0,1,1,3.34,7.27C57.07,58.6,36,91.71,36,128a92,92,0,0,0,184,0c0-36.29-21.07-69.4-53.67-84.36a4,4,0,1,1,3.34-7.27C205.1,52.63,228,88.6,228,128Z"}))]]),c=r.forwardRef((e,t)=>r.createElement(a.default,{ref:t,...e,weights:i}));c.displayName="CircleNotchIcon";var d=e.i(90072),u=e.i(8560),m=e.i(67881),f=e.i(70065),h=e.i(71435),p=e.i(87188),x=e.i(47163);function g(){let e=(0,r.useRef)(null),a=(0,r.useRef)(null),n=(0,r.useRef)(null),s=(0,r.useRef)(null),i=(0,r.useRef)(null),[g,v]=(0,r.useState)(!1),[b,w]=(0,r.useState)(null),[y,j]=(0,r.useState)(null),[E,N]=(0,r.useState)(new Set),[C,M]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(!e.current)return;let t=new d.Scene;t.background=new d.Color(1710618),a.current=t;let r=new d.PerspectiveCamera(45,1,.1,1e3);r.position.set(0,8,8),r.lookAt(0,0,0),n.current=r;let l=new u.WebGLRenderer({canvas:e.current,antialias:!0}),o=()=>{l.setSize(500,500),n.current&&(n.current.aspect=1,n.current.updateProjectionMatrix())};o(),l.shadowMap.enabled=!0,s.current=l;let c=()=>{o()};window.addEventListener("resize",c);let m=new d.AmbientLight(0xffffff,.6);t.add(m);let f=new d.DirectionalLight(0xffffff,.8);f.position.set(10,20,10),f.castShadow=!0,t.add(f);let h=()=>{i.current=requestAnimationFrame(h),n.current&&a.current&&l.render(a.current,n.current)};return h(),()=>{i.current&&cancelAnimationFrame(i.current),window.removeEventListener("resize",c)}},[]);let A=(0,r.useCallback)(e=>{a.current&&n.current&&p.modelLoader.loadModel(`tile_${e.tile_id}`,e.obj_path,e.mtl_path).then(t=>{if(!a.current||!n.current)return;let r=new d.Group;r.userData.isTileModel=!0;let l=t.clone();r.add(l);let s=new d.Box3().setFromObject(l),o=s.getCenter(new d.Vector3),i=s.getSize(new d.Vector3);l.position.sub(o);let c=1.2*(Math.max(i.x,i.y,i.z)/(2*Math.tan(n.current.fov*(Math.PI/180)/2))*1.5);n.current.position.set(0,.7*c,c),n.current.lookAt(0,0,0),n.current.updateProjectionMatrix();let u=Math.max(i.x,i.z)/2,m=1.4*u,f=Math.max(.15,.06*u),h=m+.3*u,p=[{name:"east",label:"E",pos:[m,0,0],compassPos:[h,0,0]},{name:"northeast",label:"NE",pos:[.5*m,0,-(.866*m)],compassPos:[.5*h,0,-(.866*h)]},{name:"northwest",label:"NW",pos:[-(.5*m),0,-(.866*m)],compassPos:[-(.5*h),0,-(.866*h)]},{name:"west",label:"W",pos:[-m,0,0],compassPos:[-h,0,0]},{name:"southwest",label:"SW",pos:[-(.5*m),0,.866*m],compassPos:[-(.5*h),0,.866*h]},{name:"southeast",label:"SE",pos:[.5*m,0,.866*m],compassPos:[.5*h,0,.866*h]}];p.forEach(e=>{let t=document.createElement("canvas"),a=t.getContext("2d");if(a){t.width=64,t.height=64,a.fillStyle="rgba(255, 255, 255, 0.9)",a.font="bold 24px Arial",a.textAlign="center",a.textBaseline="middle",a.fillText(e.label,32,32);let n=new d.CanvasTexture(t),l=new d.SpriteMaterial({map:n}),s=new d.Sprite(l);s.position.set(e.compassPos[0],3,e.compassPos[2]),s.scale.set(.4,.4,1),s.userData.isTileModel=!0,r.add(s)}});let x=null!==C?C:e.connections||{};p.forEach(e=>{let t=x[e.name]||"none",a=0xff0000;switch(t){case"grass":a=65280;break;case"water":case"river":a=26367;break;case"coast":a=0xd2b48c;break;case"road":a=9127187;break;default:a=0xff0000}let n=new d.SphereGeometry(f,16,16),l=new d.MeshStandardMaterial({color:a,emissive:0,roughness:.5,metalness:.1}),s=new d.Mesh(n,l);s.position.set(e.pos[0],.8,e.pos[2]),s.userData.direction=e.name,r.add(s)}),a.current.add(r)}).catch(t=>{console.error(`Failed to load tile ${e.tile_id}:`,t)})},[C]);(0,r.useEffect)(()=>{if(!a.current)return;let e=[];a.current.traverse(t=>{t.userData?.isTileModel&&e.push(t)}),e.forEach(e=>{e.parent&&e.parent.remove(e)}),y&&setTimeout(()=>{a.current&&y&&A(y)},0)},[y,A]);let S=async()=>{v(!0);try{let e=await fetch("/api/llm/generate-registry",{method:"POST"});if(!e.ok)throw Error("Failed to generate registry");let t=await e.json();w(t),N(new Set(t.approvedTiles||[]))}catch(e){console.error("Error generating registry:",e),alert(`ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð³ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ð¸ Ñ€ÐµÐµÑÑ‚Ñ€Ð°: ${e instanceof Error?e.message:"Unknown error"}`)}finally{v(!1)}},k=async()=>{if(!y||!b)return;let e=C||{};console.log("Ð£Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸Ðµ Ñ‚Ð°Ð¹Ð»Ð°:",y.tile_id),console.log("Ð¡Ð¾ÐµÐ´Ð¸Ð½ÐµÐ½Ð¸Ñ Ð´Ð»Ñ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ:",e);let t=b.tiles.map(t=>t.tile_id===y.tile_id?{...t,connections:e}:t),r=new Set([...E,y.tile_id]),a={...b,tiles:t,approvedTiles:Array.from(r)};w(a),N(r);try{await R(a),console.log(`Ð¢Ð°Ð¹Ð» ${y.tile_id} ÑƒÑ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½ Ð¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½`)}catch(e){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ð¸ Ñ‚Ð°Ð¹Ð»Ð°:",e),alert(`ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ð¸ Ñ‚Ð°Ð¹Ð»Ð°: ${e instanceof Error?e.message:"Unknown error"}`)}},R=async e=>{try{if(!(await fetch("/api/llm/save-registry",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed to save registry")}catch(e){throw console.error("Error saving registry:",e),e}},F=e=>{switch(e){case"grass":return{icon:"ðŸŸ¢",label:"Grass",color:"#00ff00"};case"water":return{icon:"ðŸ”µ",label:"Water",color:"#0066ff"};case"river":return{icon:"ðŸ”µ",label:"River",color:"#0066ff"};case"coast":return{icon:"ðŸŸ¤",label:"Coast",color:"#d2b48c"};case"road":return{icon:"ðŸŸ«",label:"Road",color:"#8b4513"};default:return{icon:"ðŸ”´",label:"None",color:"#ff0000"}}};(0,r.useEffect)(()=>{if(y){let e=y.connections||{},t={};["east","northeast","northwest","west","southwest","southeast"].forEach(r=>{let a=e[r];"boolean"==typeof a&&!0===a?t[r]="unknown":"string"==typeof a?t[r]=a:null!=a&&"boolean"!=typeof a&&(t[r]="unknown")}),M(t)}else M(null)},[y]),(0,r.useEffect)(()=>{if(!e.current||!y)return;let t=t=>{if(!n.current||!a.current||!s.current||!e.current)return;let r=e.current.getBoundingClientRect(),l=new d.Vector2;l.x=(t.clientX-r.left)/r.width*2-1,l.y=-(2*((t.clientY-r.top)/r.height))+1;let o=new d.Raycaster;o.setFromCamera(l,n.current);let i=o.intersectObjects(a.current.children,!0).find(e=>e.object.userData.direction);if(i?.object.userData.direction){let e,r=i.object.userData.direction,a=C?.[r]||"none",n=["none","grass","water","river","coast","road"],l=n.indexOf(a);if(0===t.button)e=(l+1)%n.length;else{if(2!==t.button)return;e=(l-1+n.length)%n.length}let s=n[e];M(e=>{let t=e?{...e}:{};return"none"===s?delete t[r]:t[r]=s,t})}},r=e=>{e.preventDefault()},l=e.current;return l.addEventListener("mousedown",t),l.addEventListener("contextmenu",r),()=>{l.removeEventListener("mousedown",t),l.removeEventListener("contextmenu",r)}},[y,C]);let _=b?.tiles.filter(e=>"tiles"===e.category&&("rivers"===e.subcategory||"roads"===e.subcategory||"coast"===e.subcategory||"base"===e.subcategory))||[];return(0,t.jsxs)("div",{className:"flex h-screen w-screen bg-background",children:[(0,t.jsxs)("div",{className:"w-96 border-r border-border bg-card",children:[(0,t.jsxs)("div",{className:"p-4 border-b border-border",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Tile Registry Generation"}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsx)(m.Button,{onClick:S,disabled:g,className:"flex-1",children:g?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c,{className:"mr-2 h-4 w-4 animate-spin"}),"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l,{className:"mr-2 h-4 w-4"}),"Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ Ñ€ÐµÐµÑÑ‚Ñ€"]})})})]}),b&&(0,t.jsxs)("div",{className:"p-4 border-b border-border",children:[(0,t.jsx)("div",{className:"text-sm text-muted-foreground mb-2",children:"Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ°:"}),(0,t.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,t.jsxs)("div",{children:["Ð’ÑÐµÐ³Ð¾ Ñ‚Ð°Ð¹Ð»Ð¾Ð²: ",b.totalTiles]}),(0,t.jsxs)("div",{children:["Ð¡ ÑÐ¾ÐµÐ´Ð¸Ð½ÐµÐ½Ð¸ÑÐ¼Ð¸: ",b.statistics.tilesWithConnections]}),(0,t.jsxs)("div",{children:["Ð¢Ñ€ÐµÐ±ÑƒÑŽÑ‚ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸: ",_.length]}),(0,t.jsxs)("div",{children:["Ð£Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¾: ",E.size]})]})]}),(0,t.jsx)(h.ScrollArea,{className:"h-[calc(100vh-200px)]",children:(0,t.jsx)("div",{className:"p-4 space-y-2",children:_.map(e=>{var r;let a=E.has(e.tile_id),n=(r=e.connections)?Object.values(r).filter(Boolean).length:0;return(0,t.jsx)(f.Card,{className:(0,x.cn)("cursor-pointer transition-colors",y?.tile_id===e.tile_id&&"ring-2 ring-primary",a&&"bg-green-500/10 border-green-500/50"),onClick:()=>j(e),children:(0,t.jsx)(f.CardContent,{className:"p-3",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"font-medium text-sm truncate",children:e.name}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground mt-1",children:[e.subcategory," â€¢ ",n," ÑÐ¾ÐµÐ´Ð¸Ð½ÐµÐ½Ð¸Ð¹"]}),e.connections&&(0,t.jsx)("div",{className:"text-xs text-muted-foreground mt-1 truncate",children:(e=>{if(!e)return"ÐÐµÑ‚ ÑÐ¾ÐµÐ´Ð¸Ð½ÐµÐ½Ð¸Ð¹";let t=Object.entries(e).filter(([,e])=>e).map(([e])=>e);return t.length>0?t.join(", "):"ÐÐµÑ‚ ÑÐ¾ÐµÐ´Ð¸Ð½ÐµÐ½Ð¸Ð¹"})(e.connections)})]}),a&&(0,t.jsx)(o,{className:"h-4 w-4 text-green-500 flex-shrink-0 ml-2"})]})})},e.tile_id)})})})]}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,t.jsx)("div",{className:"p-4 border-b border-border",children:(0,t.jsx)("div",{className:"flex items-start justify-between",children:(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:y?`ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€: ${y.name}`:"Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ‚Ð°Ð¹Ð» Ð´Ð»Ñ Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€Ð°"}),y&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Ð›ÐšÐœ Ð¿Ð¾ Ñ‚Ð¾Ñ‡ÐºÐµ - ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ð¹ Ñ‚Ð¸Ð¿, ÐŸÐšÐœ - Ð¿Ñ€ÐµÐ´Ñ‹Ð´ÑƒÑ‰Ð¸Ð¹ Ñ‚Ð¸Ð¿"})]})})}),(0,t.jsx)("div",{className:"w-[500px] h-[500px] bg-muted/30 relative border-b border-border mx-auto overflow-hidden rounded-lg",children:(0,t.jsx)("canvas",{ref:e,className:"absolute inset-0 w-full h-full"})}),y&&(0,t.jsxs)("div",{className:"p-4 border-t border-border",children:[C&&(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-semibold mb-2 text-muted-foreground",children:"Ð˜ÑÑ…Ð¾Ð´Ð½Ñ‹Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ"}),(0,t.jsx)("div",{className:"space-y-1",children:["west","northwest","northeast","east","southeast","southwest"].map(e=>{let r=y.connections?.[e]||"none",a=F("string"==typeof r?r:"none");return(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)("span",{className:"uppercase text-xs font-mono w-8",children:"west"===e?"W":"northwest"===e?"NW":"northeast"===e?"NE":"east"===e?"E":"southeast"===e?"SE":"SW"}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{children:a.icon}),(0,t.jsx)("span",{style:{color:a.color},children:a.label})]})]},e)})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-semibold mb-2 text-muted-foreground",children:"Ð¢ÐµÐºÑƒÑ‰Ð¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ"}),(0,t.jsx)("div",{className:"space-y-1",children:["west","northwest","northeast","east","southeast","southwest"].map(e=>{let r=C?.[e]||"none",a=F("string"==typeof r?r:"none");return(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)("span",{className:"uppercase text-xs font-mono w-8",children:"west"===e?"W":"northwest"===e?"NW":"northeast"===e?"NE":"east"===e?"E":"southeast"===e?"SE":"SW"}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{children:a.icon}),(0,t.jsx)("span",{style:{color:a.color},children:a.label})]})]},e)})})]})]})}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(m.Button,{onClick:k,variant:E.has(y.tile_id)?"default":"outline",children:[(0,t.jsx)(o,{className:"mr-2 h-4 w-4"}),"Ð£Ñ‚Ð²ÐµÑ€Ð´Ð¸Ñ‚ÑŒ"]}),(0,t.jsxs)(m.Button,{onClick:()=>{M(y.connections?{...y.connections}:{})},variant:"outline",children:[(0,t.jsx)(l,{className:"mr-2 h-4 w-4"}),"Ð¡Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ"]})]})]})]})]})}e.s(["default",()=>g],29890)},61353,e=>{e.v(t=>Promise.all(["static/chunks/00f4bb4e1cf9eac3.js"].map(t=>e.l(t))).then(()=>t(77806)))},99695,e=>{e.v(t=>Promise.all(["static/chunks/e8be139b19d0472c.js"].map(t=>e.l(t))).then(()=>t(11547)))}]);