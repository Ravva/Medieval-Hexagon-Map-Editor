(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,16015,(e,t,r)=>{},98547,(e,t,r)=>{var a=e.i(47167);e.r(16015);var n=e.r(71645),l=n&&"object"==typeof n&&"default"in n?n:{default:n},s=void 0!==a.default&&a.default.env&&!0,i=function(e){return"[object String]"===Object.prototype.toString.call(e)},o=function(){function e(e){var t=void 0===e?{}:e,r=t.name,a=void 0===r?"stylesheet":r,n=t.optimizeForSpeed,l=void 0===n?s:n;c(i(a),"`name` must be a string"),this._name=a,this._deletedRulePlaceholder="#"+a+"-deleted-rule____{}",c("boolean"==typeof l,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=l,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var o="undefined"!=typeof window&&document.querySelector('meta[property="csp-nonce"]');this._nonce=o?o.getAttribute("content"):null}var t,r=e.prototype;return r.setOptimizeForSpeed=function(e){c("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),c(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},r.isOptimizeForSpeed=function(){return this._optimizeForSpeed},r.inject=function(){var e=this;if(c(!this._injected,"sheet already injected"),this._injected=!0,"undefined"!=typeof window&&this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(s||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(t,r){return"number"==typeof r?e._serverSheet.cssRules[r]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),r},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},r.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},r.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},r.insertRule=function(e,t){if(c(i(e),"`insertRule` accepts only strings"),"undefined"==typeof window)return"number"!=typeof t&&(t=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,t),this._rulesCount++;if(this._optimizeForSpeed){var r=this.getSheet();"number"!=typeof t&&(t=r.cssRules.length);try{r.insertRule(e,t)}catch(t){return s||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var a=this._tags[t];this._tags.push(this.makeStyleTag(this._name,e,a))}return this._rulesCount++},r.replaceRule=function(e,t){if(this._optimizeForSpeed||"undefined"==typeof window){var r="undefined"!=typeof window?this.getSheet():this._serverSheet;if(t.trim()||(t=this._deletedRulePlaceholder),!r.cssRules[e])return e;r.deleteRule(e);try{r.insertRule(t,e)}catch(a){s||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),r.insertRule(this._deletedRulePlaceholder,e)}}else{var a=this._tags[e];c(a,"old rule at index `"+e+"` not found"),a.textContent=t}return e},r.deleteRule=function(e){if("undefined"==typeof window)return void this._serverSheet.deleteRule(e);if(this._optimizeForSpeed)this.replaceRule(e,"");else{var t=this._tags[e];c(t,"rule at index `"+e+"` not found"),t.parentNode.removeChild(t),this._tags[e]=null}},r.flush=function(){this._injected=!1,this._rulesCount=0,"undefined"!=typeof window?(this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]):this._serverSheet.cssRules=[]},r.cssRules=function(){var e=this;return"undefined"==typeof window?this._serverSheet.cssRules:this._tags.reduce(function(t,r){return r?t=t.concat(Array.prototype.map.call(e.getSheetForTag(r).cssRules,function(t){return t.cssText===e._deletedRulePlaceholder?null:t})):t.push(null),t},[])},r.makeStyleTag=function(e,t,r){t&&c(i(t),"makeStyleTag accepts only strings as second parameter");var a=document.createElement("style");this._nonce&&a.setAttribute("nonce",this._nonce),a.type="text/css",a.setAttribute("data-"+e,""),t&&a.appendChild(document.createTextNode(t));var n=document.head||document.getElementsByTagName("head")[0];return r?n.insertBefore(a,r):n.appendChild(a),a},t=[{key:"length",get:function(){return this._rulesCount}}],function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}(e.prototype,t),e}();function c(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var d=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return t>>>0},u={};function m(e,t){if(!t)return"jsx-"+e;var r=String(t),a=e+r;return u[a]||(u[a]="jsx-"+d(e+"-"+r)),u[a]}function h(e,t){"undefined"==typeof window&&(t=t.replace(/\/style/gi,"\\/style"));var r=e+t;return u[r]||(u[r]=t.replace(/__jsx-style-dynamic-selector/g,e)),u[r]}var p=function(){function e(e){var t=void 0===e?{}:e,r=t.styleSheet,a=void 0===r?null:r,n=t.optimizeForSpeed,l=void 0!==n&&n;this._sheet=a||new o({name:"styled-jsx",optimizeForSpeed:l}),this._sheet.inject(),a&&"boolean"==typeof l&&(this._sheet.setOptimizeForSpeed(l),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),"undefined"==typeof window||this._fromServer||(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,t){return e[t]=0,e},{}));var r=this.getIdAndRules(e),a=r.styleId,n=r.rules;if(a in this._instancesCounts){this._instancesCounts[a]+=1;return}var l=n.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[a]=l,this._instancesCounts[a]=1},t.remove=function(e){var t=this,r=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}(r in this._instancesCounts,"styleId: `"+r+"` not found"),this._instancesCounts[r]-=1,this._instancesCounts[r]<1){var a=this._fromServer&&this._fromServer[r];a?(a.parentNode.removeChild(a),delete this._fromServer[r]):(this._indices[r].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[r]),delete this._instancesCounts[r]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],r=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return r[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},t.styles=function(e){var t,r;return t=this.cssRules(),void 0===(r=e)&&(r={}),t.map(function(e){var t=e[0],a=e[1];return l.default.createElement("style",{id:"__"+t,key:"__"+t,nonce:r.nonce?r.nonce:void 0,dangerouslySetInnerHTML:{__html:a}})})},t.getIdAndRules=function(e){var t=e.children,r=e.dynamic,a=e.id;if(r){var n=m(a,r);return{styleId:n,rules:Array.isArray(t)?t.map(function(e){return h(n,e)}):[h(n,t)]}}return{styleId:m(a),rules:Array.isArray(t)?t:[t]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}(),f=n.createContext(null);function g(){return new p}function x(){return n.useContext(f)}f.displayName="StyleSheetContext";var b=l.default.useInsertionEffect||l.default.useLayoutEffect,v="undefined"!=typeof window?g():void 0;function y(e){var t=v||x();return t&&("undefined"==typeof window?t.add(e):b(function(){return t.add(e),function(){t.remove(e)}},[e.id,String(e.dynamic)])),null}y.dynamic=function(e){return e.map(function(e){return m(e[0],e[1])}).join(" ")},r.StyleRegistry=function(e){var t=e.registry,r=e.children,a=n.useContext(f),s=n.useState(function(){return a||t||g()})[0];return l.default.createElement(f.Provider,{value:s},r)},r.createStyleRegistry=g,r.style=y,r.useStyleRegistry=x},37902,(e,t,r)=>{t.exports=e.r(98547).style},51543,e=>{"use strict";let t,r,a,n,l,s;var i=e.i(43476),o=e.i(37902),c=e.i(71645),d=e.i(90072),u=e.i(8560);function m(e){let t;if(!e.startsWith("/assets/"))return e;let r="/Medieval-Hexagon-Map-Editor";return t=`${r}${e}`,console.log("Asset path conversion:",{original:e,basePath:r,nodeEnv:"production",result:t}),t}e.i(47167);var h=e.i(69464);let p=new Map([["bold",c.createElement(c.Fragment,null,c.createElement("path",{d:"M231.38,46.54a12,12,0,0,0-10.29-2.18L161.4,59.28l-60-30a12,12,0,0,0-8.28-.91l-64,16A12,12,0,0,0,20,56V200a12,12,0,0,0,14.91,11.64L94.6,196.72l60,30a12,12,0,0,0,8.28.91l64-16A12,12,0,0,0,236,200V56A12,12,0,0,0,231.38,46.54ZM108,59.42l40,20V196.58l-40-20Zm-64,6,40-10V174.63l-40,10ZM212,190.63l-40,10V81.37l40-10Z"}))],["duotone",c.createElement(c.Fragment,null,c.createElement("path",{d:"M160,72V216L96,184V40Z",opacity:"0.2"}),c.createElement("path",{d:"M228.92,49.69a8,8,0,0,0-6.86-1.45L160.93,63.52,99.58,32.84a8,8,0,0,0-5.52-.6l-64,16A8,8,0,0,0,24,56V200a8,8,0,0,0,9.94,7.76l61.13-15.28,61.35,30.68A8.15,8.15,0,0,0,160,224a8,8,0,0,0,1.94-.24l64-16A8,8,0,0,0,232,200V56A8,8,0,0,0,228.92,49.69ZM104,52.94l48,24V203.06l-48-24ZM40,62.25l48-12v127.5l-48,12Zm176,131.5-48,12V78.25l48-12Z"}))],["fill",c.createElement(c.Fragment,null,c.createElement("path",{d:"M228.92,49.69a8,8,0,0,0-6.86-1.45L160.93,63.52,99.58,32.84a8,8,0,0,0-5.52-.6l-64,16A8,8,0,0,0,24,56V200a8,8,0,0,0,9.94,7.76l61.13-15.28,61.35,30.68A8.15,8.15,0,0,0,160,224a8,8,0,0,0,1.94-.24l64-16A8,8,0,0,0,232,200V56A8,8,0,0,0,228.92,49.69ZM96,176a8,8,0,0,0-1.94.24L40,189.75V62.25L95.07,48.48l.93.46Zm120,17.75-55.07,13.77-.93-.46V80a8,8,0,0,0,1.94-.23L216,66.25Z"}))],["light",c.createElement(c.Fragment,null,c.createElement("path",{d:"M227.69,51.27a6,6,0,0,0-5.15-1.09L160.7,65.64l-62-31a6,6,0,0,0-4.14-.45l-64,16A6,6,0,0,0,26,56V200a6,6,0,0,0,7.46,5.82L95.3,190.36l62,31a6,6,0,0,0,4.14.45l64-16A6,6,0,0,0,230,200V56A6,6,0,0,0,227.69,51.27ZM102,49.71l52,26V206.29l-52-26Zm-64,11,52-13V179.32l-52,13ZM218,195.32l-52,13V76.68l52-13Z"}))],["regular",c.createElement(c.Fragment,null,c.createElement("path",{d:"M228.92,49.69a8,8,0,0,0-6.86-1.45L160.93,63.52,99.58,32.84a8,8,0,0,0-5.52-.6l-64,16A8,8,0,0,0,24,56V200a8,8,0,0,0,9.94,7.76l61.13-15.28,61.35,30.68A8.15,8.15,0,0,0,160,224a8,8,0,0,0,1.94-.24l64-16A8,8,0,0,0,232,200V56A8,8,0,0,0,228.92,49.69ZM104,52.94l48,24V203.06l-48-24ZM40,62.25l48-12v127.5l-48,12Zm176,131.5-48,12V78.25l48-12Z"}))],["thin",c.createElement(c.Fragment,null,c.createElement("path",{d:"M226.46,52.85a4,4,0,0,0-3.43-.73L160.47,67.76,97.79,36.42a4,4,0,0,0-2.76-.3l-64,16A4,4,0,0,0,28,56V200a4,4,0,0,0,5,3.88l62.56-15.64,62.68,31.34a4,4,0,0,0,2.76.3l64-16a4,4,0,0,0,3-3.88V56A4,4,0,0,0,226.46,52.85ZM100,46.47l56,28V209.53l-56-28ZM36,59.12l56-14V180.88l-56,14ZM220,196.88l-56,14V75.12l56-14Z"}))]]),f=c.forwardRef((e,t)=>c.createElement(h.default,{ref:t,...e,weights:p}));f.displayName="MapTrifoldIcon";let g=new Map([["bold",c.createElement(c.Fragment,null,c.createElement("path",{d:"M222.14,69.17,186.83,33.86A19.86,19.86,0,0,0,172.69,28H48A20,20,0,0,0,28,48V208a20,20,0,0,0,20,20H208a20,20,0,0,0,20-20V83.31A19.86,19.86,0,0,0,222.14,69.17ZM164,204H92V160h72Zm40,0H188V156a20,20,0,0,0-20-20H88a20,20,0,0,0-20,20v48H52V52H171l33,33ZM164,84a12,12,0,0,1-12,12H96a12,12,0,0,1,0-24h56A12,12,0,0,1,164,84Z"}))],["duotone",c.createElement(c.Fragment,null,c.createElement("path",{d:"M216,83.31V208a8,8,0,0,1-8,8H176V152a8,8,0,0,0-8-8H88a8,8,0,0,0-8,8v64H48a8,8,0,0,1-8-8V48a8,8,0,0,1,8-8H172.69a8,8,0,0,1,5.65,2.34l35.32,35.32A8,8,0,0,1,216,83.31Z",opacity:"0.2"}),c.createElement("path",{d:"M219.31,72,184,36.69A15.86,15.86,0,0,0,172.69,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V83.31A15.86,15.86,0,0,0,219.31,72ZM168,208H88V152h80Zm40,0H184V152a16,16,0,0,0-16-16H88a16,16,0,0,0-16,16v56H48V48H172.69L208,83.31ZM160,72a8,8,0,0,1-8,8H96a8,8,0,0,1,0-16h56A8,8,0,0,1,160,72Z"}))],["fill",c.createElement(c.Fragment,null,c.createElement("path",{d:"M219.31,72,184,36.69A15.86,15.86,0,0,0,172.69,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V83.31A15.86,15.86,0,0,0,219.31,72ZM208,208H184V152a16,16,0,0,0-16-16H88a16,16,0,0,0-16,16v56H48V48H172.69L208,83.31ZM160,72a8,8,0,0,1-8,8H96a8,8,0,0,1,0-16h56A8,8,0,0,1,160,72Z"}))],["light",c.createElement(c.Fragment,null,c.createElement("path",{d:"M217.9,73.42,182.58,38.1a13.9,13.9,0,0,0-9.89-4.1H48A14,14,0,0,0,34,48V208a14,14,0,0,0,14,14H208a14,14,0,0,0,14-14V83.31A13.9,13.9,0,0,0,217.9,73.42ZM170,210H86V152a2,2,0,0,1,2-2h80a2,2,0,0,1,2,2Zm40-2a2,2,0,0,1-2,2H182V152a14,14,0,0,0-14-14H88a14,14,0,0,0-14,14v58H48a2,2,0,0,1-2-2V48a2,2,0,0,1,2-2H172.69a2,2,0,0,1,1.41.58L209.42,81.9a2,2,0,0,1,.58,1.41ZM158,72a6,6,0,0,1-6,6H96a6,6,0,0,1,0-12h56A6,6,0,0,1,158,72Z"}))],["regular",c.createElement(c.Fragment,null,c.createElement("path",{d:"M219.31,72,184,36.69A15.86,15.86,0,0,0,172.69,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V83.31A15.86,15.86,0,0,0,219.31,72ZM168,208H88V152h80Zm40,0H184V152a16,16,0,0,0-16-16H88a16,16,0,0,0-16,16v56H48V48H172.69L208,83.31ZM160,72a8,8,0,0,1-8,8H96a8,8,0,0,1,0-16h56A8,8,0,0,1,160,72Z"}))],["thin",c.createElement(c.Fragment,null,c.createElement("path",{d:"M216.49,74.83,181.17,39.51A11.93,11.93,0,0,0,172.69,36H48A12,12,0,0,0,36,48V208a12,12,0,0,0,12,12H208a12,12,0,0,0,12-12V83.31A11.93,11.93,0,0,0,216.49,74.83ZM172,212H84V152a4,4,0,0,1,4-4h80a4,4,0,0,1,4,4Zm40-4a4,4,0,0,1-4,4H180V152a12,12,0,0,0-12-12H88a12,12,0,0,0-12,12v60H48a4,4,0,0,1-4-4V48a4,4,0,0,1,4-4H172.69a4,4,0,0,1,2.82,1.17l35.32,35.32A4,4,0,0,1,212,83.31ZM156,72a4,4,0,0,1-4,4H96a4,4,0,0,1,0-8h56A4,4,0,0,1,156,72Z"}))]]),x=c.forwardRef((e,t)=>c.createElement(h.default,{ref:t,...e,weights:g}));x.displayName="FloppyDiskIcon";let b=new Map([["bold",c.createElement(c.Fragment,null,c.createElement("path",{d:"M216,48H180V36A28,28,0,0,0,152,8H104A28,28,0,0,0,76,36V48H40a12,12,0,0,0,0,24h4V208a20,20,0,0,0,20,20H192a20,20,0,0,0,20-20V72h4a12,12,0,0,0,0-24ZM100,36a4,4,0,0,1,4-4h48a4,4,0,0,1,4,4V48H100Zm88,168H68V72H188ZM116,104v64a12,12,0,0,1-24,0V104a12,12,0,0,1,24,0Zm48,0v64a12,12,0,0,1-24,0V104a12,12,0,0,1,24,0Z"}))],["duotone",c.createElement(c.Fragment,null,c.createElement("path",{d:"M200,56V208a8,8,0,0,1-8,8H64a8,8,0,0,1-8-8V56Z",opacity:"0.2"}),c.createElement("path",{d:"M216,48H176V40a24,24,0,0,0-24-24H104A24,24,0,0,0,80,40v8H40a8,8,0,0,0,0,16h8V208a16,16,0,0,0,16,16H192a16,16,0,0,0,16-16V64h8a8,8,0,0,0,0-16ZM96,40a8,8,0,0,1,8-8h48a8,8,0,0,1,8,8v8H96Zm96,168H64V64H192ZM112,104v64a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Zm48,0v64a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Z"}))],["fill",c.createElement(c.Fragment,null,c.createElement("path",{d:"M216,48H176V40a24,24,0,0,0-24-24H104A24,24,0,0,0,80,40v8H40a8,8,0,0,0,0,16h8V208a16,16,0,0,0,16,16H192a16,16,0,0,0,16-16V64h8a8,8,0,0,0,0-16ZM112,168a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Zm48,0a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Zm0-120H96V40a8,8,0,0,1,8-8h48a8,8,0,0,1,8,8Z"}))],["light",c.createElement(c.Fragment,null,c.createElement("path",{d:"M216,50H174V40a22,22,0,0,0-22-22H104A22,22,0,0,0,82,40V50H40a6,6,0,0,0,0,12H50V208a14,14,0,0,0,14,14H192a14,14,0,0,0,14-14V62h10a6,6,0,0,0,0-12ZM94,40a10,10,0,0,1,10-10h48a10,10,0,0,1,10,10V50H94ZM194,208a2,2,0,0,1-2,2H64a2,2,0,0,1-2-2V62H194ZM110,104v64a6,6,0,0,1-12,0V104a6,6,0,0,1,12,0Zm48,0v64a6,6,0,0,1-12,0V104a6,6,0,0,1,12,0Z"}))],["regular",c.createElement(c.Fragment,null,c.createElement("path",{d:"M216,48H176V40a24,24,0,0,0-24-24H104A24,24,0,0,0,80,40v8H40a8,8,0,0,0,0,16h8V208a16,16,0,0,0,16,16H192a16,16,0,0,0,16-16V64h8a8,8,0,0,0,0-16ZM96,40a8,8,0,0,1,8-8h48a8,8,0,0,1,8,8v8H96Zm96,168H64V64H192ZM112,104v64a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Zm48,0v64a8,8,0,0,1-16,0V104a8,8,0,0,1,16,0Z"}))],["thin",c.createElement(c.Fragment,null,c.createElement("path",{d:"M216,52H172V40a20,20,0,0,0-20-20H104A20,20,0,0,0,84,40V52H40a4,4,0,0,0,0,8H52V208a12,12,0,0,0,12,12H192a12,12,0,0,0,12-12V60h12a4,4,0,0,0,0-8ZM92,40a12,12,0,0,1,12-12h48a12,12,0,0,1,12,12V52H92ZM196,208a4,4,0,0,1-4,4H64a4,4,0,0,1-4-4V60H196ZM108,104v64a4,4,0,0,1-8,0V104a4,4,0,0,1,8,0Zm48,0v64a4,4,0,0,1-8,0V104a4,4,0,0,1,8,0Z"}))]]),v=c.forwardRef((e,t)=>c.createElement(h.default,{ref:t,...e,weights:b}));v.displayName="TrashIcon";let y=new Map([["bold",c.createElement(c.Fragment,null,c.createElement("path",{d:"M216.49,168.49a12,12,0,0,1-17,0L128,97,56.49,168.49a12,12,0,0,1-17-17l80-80a12,12,0,0,1,17,0l80,80A12,12,0,0,1,216.49,168.49Z"}))],["duotone",c.createElement(c.Fragment,null,c.createElement("path",{d:"M208,160H48l80-80Z",opacity:"0.2"}),c.createElement("path",{d:"M213.66,154.34l-80-80a8,8,0,0,0-11.32,0l-80,80A8,8,0,0,0,48,168H208a8,8,0,0,0,5.66-13.66ZM67.31,152,128,91.31,188.69,152Z"}))],["fill",c.createElement(c.Fragment,null,c.createElement("path",{d:"M215.39,163.06A8,8,0,0,1,208,168H48a8,8,0,0,1-5.66-13.66l80-80a8,8,0,0,1,11.32,0l80,80A8,8,0,0,1,215.39,163.06Z"}))],["light",c.createElement(c.Fragment,null,c.createElement("path",{d:"M212.24,164.24a6,6,0,0,1-8.48,0L128,88.49,52.24,164.24a6,6,0,0,1-8.48-8.48l80-80a6,6,0,0,1,8.48,0l80,80A6,6,0,0,1,212.24,164.24Z"}))],["regular",c.createElement(c.Fragment,null,c.createElement("path",{d:"M213.66,165.66a8,8,0,0,1-11.32,0L128,91.31,53.66,165.66a8,8,0,0,1-11.32-11.32l80-80a8,8,0,0,1,11.32,0l80,80A8,8,0,0,1,213.66,165.66Z"}))],["thin",c.createElement(c.Fragment,null,c.createElement("path",{d:"M210.83,162.83a4,4,0,0,1-5.66,0L128,85.66,50.83,162.83a4,4,0,0,1-5.66-5.66l80-80a4,4,0,0,1,5.66,0l80,80A4,4,0,0,1,210.83,162.83Z"}))]]),j=c.forwardRef((e,t)=>c.createElement(h.default,{ref:t,...e,weights:y}));j.displayName="CaretUpIcon";let w=new Map([["bold",c.createElement(c.Fragment,null,c.createElement("path",{d:"M216.49,104.49l-80,80a12,12,0,0,1-17,0l-80-80a12,12,0,0,1,17-17L128,159l71.51-71.52a12,12,0,0,1,17,17Z"}))],["duotone",c.createElement(c.Fragment,null,c.createElement("path",{d:"M208,96l-80,80L48,96Z",opacity:"0.2"}),c.createElement("path",{d:"M215.39,92.94A8,8,0,0,0,208,88H48a8,8,0,0,0-5.66,13.66l80,80a8,8,0,0,0,11.32,0l80-80A8,8,0,0,0,215.39,92.94ZM128,164.69,67.31,104H188.69Z"}))],["fill",c.createElement(c.Fragment,null,c.createElement("path",{d:"M213.66,101.66l-80,80a8,8,0,0,1-11.32,0l-80-80A8,8,0,0,1,48,88H208a8,8,0,0,1,5.66,13.66Z"}))],["light",c.createElement(c.Fragment,null,c.createElement("path",{d:"M212.24,100.24l-80,80a6,6,0,0,1-8.48,0l-80-80a6,6,0,0,1,8.48-8.48L128,167.51l75.76-75.75a6,6,0,0,1,8.48,8.48Z"}))],["regular",c.createElement(c.Fragment,null,c.createElement("path",{d:"M213.66,101.66l-80,80a8,8,0,0,1-11.32,0l-80-80A8,8,0,0,1,53.66,90.34L128,164.69l74.34-74.35a8,8,0,0,1,11.32,11.32Z"}))],["thin",c.createElement(c.Fragment,null,c.createElement("path",{d:"M210.83,98.83l-80,80a4,4,0,0,1-5.66,0l-80-80a4,4,0,0,1,5.66-5.66L128,170.34l77.17-77.17a4,4,0,1,1,5.66,5.66Z"}))]]),M=c.forwardRef((e,t)=>c.createElement(h.default,{ref:t,...e,weights:w}));M.displayName="CaretDownIcon";let N=new Map([["bold",c.createElement(c.Fragment,null,c.createElement("path",{d:"M140,40V216a12,12,0,0,1-24,0V40a12,12,0,0,1,24,0ZM64.49,87.51a12,12,0,0,0-17,17L59,116H16a12,12,0,0,0,0,24H59L47.51,151.51a12,12,0,0,0,17,17l32-32a12,12,0,0,0,0-17ZM240,116H197l11.52-11.51a12,12,0,0,0-17-17l-32,32a12,12,0,0,0,0,17l32,32a12,12,0,0,0,17-17L197,140h43a12,12,0,0,0,0-24Z"}))],["duotone",c.createElement(c.Fragment,null,c.createElement("path",{d:"M240,56V200a16,16,0,0,1-16,16H32a16,16,0,0,1-16-16V56A16,16,0,0,1,32,40H224A16,16,0,0,1,240,56Z",opacity:"0.2"}),c.createElement("path",{d:"M136,40V216a8,8,0,0,1-16,0V40a8,8,0,0,1,16,0ZM69.66,90.34a8,8,0,0,0-11.32,11.32L76.69,120H16a8,8,0,0,0,0,16H76.69L58.34,154.34a8,8,0,0,0,11.32,11.32l32-32a8,8,0,0,0,0-11.32ZM240,120H179.31l18.35-18.34a8,8,0,0,0-11.32-11.32l-32,32a8,8,0,0,0,0,11.32l32,32a8,8,0,0,0,11.32-11.32L179.31,136H240a8,8,0,0,0,0-16Z"}))],["fill",c.createElement(c.Fragment,null,c.createElement("path",{d:"M101.66,122.34a8,8,0,0,1,0,11.32l-32,32A8,8,0,0,1,56,160V136H16a8,8,0,0,1,0-16H56V96a8,8,0,0,1,13.66-5.66ZM240,120H200V96a8,8,0,0,0-13.66-5.66l-32,32a8,8,0,0,0,0,11.32l32,32A8,8,0,0,0,200,160V136h40a8,8,0,0,0,0-16ZM128,32a8,8,0,0,0-8,8V216a8,8,0,0,0,16,0V40A8,8,0,0,0,128,32Z"}))],["light",c.createElement(c.Fragment,null,c.createElement("path",{d:"M134,40V216a6,6,0,0,1-12,0V40a6,6,0,0,1,12,0ZM68.24,91.76a6,6,0,0,0-8.48,8.48L81.51,122H16a6,6,0,0,0,0,12H81.51L59.76,155.76a6,6,0,1,0,8.48,8.48l32-32a6,6,0,0,0,0-8.48ZM240,122H174.49l21.75-21.76a6,6,0,0,0-8.48-8.48l-32,32a6,6,0,0,0,0,8.48l32,32a6,6,0,0,0,8.48-8.48L174.49,134H240a6,6,0,0,0,0-12Z"}))],["regular",c.createElement(c.Fragment,null,c.createElement("path",{d:"M136,40V216a8,8,0,0,1-16,0V40a8,8,0,0,1,16,0ZM69.66,90.34a8,8,0,0,0-11.32,11.32L76.69,120H16a8,8,0,0,0,0,16H76.69L58.34,154.34a8,8,0,0,0,11.32,11.32l32-32a8,8,0,0,0,0-11.32ZM240,120H179.31l18.35-18.34a8,8,0,0,0-11.32-11.32l-32,32a8,8,0,0,0,0,11.32l32,32a8,8,0,0,0,11.32-11.32L179.31,136H240a8,8,0,0,0,0-16Z"}))],["thin",c.createElement(c.Fragment,null,c.createElement("path",{d:"M132,40V216a4,4,0,0,1-8,0V40a4,4,0,0,1,8,0ZM66.83,93.17a4,4,0,0,0-5.66,5.66L86.34,124H16a4,4,0,0,0,0,8H86.34L61.17,157.17a4,4,0,0,0,5.66,5.66l32-32a4,4,0,0,0,0-5.66ZM240,124H169.66l25.17-25.17a4,4,0,1,0-5.66-5.66l-32,32a4,4,0,0,0,0,5.66l32,32a4,4,0,0,0,5.66-5.66L169.66,132H240a4,4,0,0,0,0-8Z"}))]]),E=c.forwardRef((e,t)=>c.createElement(h.default,{ref:t,...e,weights:N}));E.displayName="ArrowsInLineHorizontalIcon";let S=new Map([["bold",c.createElement(c.Fragment,null,c.createElement("path",{d:"M225.6,62.64l-88-48.17a19.91,19.91,0,0,0-19.2,0l-88,48.17A20,20,0,0,0,20,80.19v95.62a20,20,0,0,0,10.4,17.55l88,48.17a19.89,19.89,0,0,0,19.2,0l88-48.17A20,20,0,0,0,236,175.81V80.19A20,20,0,0,0,225.6,62.64ZM128,36.57,200,76,128,115.4,56,76ZM44,96.79l72,39.4v76.67L44,173.44Zm96,116.07V136.19l72-39.4v76.65Z"}))],["duotone",c.createElement(c.Fragment,null,c.createElement("path",{d:"M128,129.09V232a8,8,0,0,1-3.84-1l-88-48.16a8,8,0,0,1-4.16-7V80.2a8,8,0,0,1,.7-3.27Z",opacity:"0.2"}),c.createElement("path",{d:"M223.68,66.15,135.68,18h0a15.88,15.88,0,0,0-15.36,0l-88,48.17a16,16,0,0,0-8.32,14v95.64a16,16,0,0,0,8.32,14l88,48.17a15.88,15.88,0,0,0,15.36,0l88-48.17a16,16,0,0,0,8.32-14V80.18A16,16,0,0,0,223.68,66.15ZM128,32h0l80.34,44L128,120,47.66,76ZM40,90l80,43.78v85.79L40,175.82Zm96,129.57V133.82L216,90v85.78Z"}))],["fill",c.createElement(c.Fragment,null,c.createElement("path",{d:"M223.68,66.15,135.68,18a15.88,15.88,0,0,0-15.36,0l-88,48.17a16,16,0,0,0-8.32,14v95.64a16,16,0,0,0,8.32,14l88,48.17a15.88,15.88,0,0,0,15.36,0l88-48.17a16,16,0,0,0,8.32-14V80.18A16,16,0,0,0,223.68,66.15ZM128,120,47.65,76,128,32l80.35,44Zm8,99.64V133.83l80-43.78v85.76Z"}))],["light",c.createElement(c.Fragment,null,c.createElement("path",{d:"M222.72,67.9l-88-48.17a13.9,13.9,0,0,0-13.44,0l-88,48.18A14,14,0,0,0,26,80.18v95.64a14,14,0,0,0,7.28,12.27l88,48.18a13.92,13.92,0,0,0,13.44,0l88-48.18A14,14,0,0,0,230,175.82V80.18A14,14,0,0,0,222.72,67.9ZM127,30.25a2,2,0,0,1,1.92,0L212.51,76,128,122.24,43.49,76ZM39,177.57a2,2,0,0,1-1-1.75V86.66l84,46V223Zm177.92,0L134,223V132.64l84-46v89.16A2,2,0,0,1,217,177.57Z"}))],["regular",c.createElement(c.Fragment,null,c.createElement("path",{d:"M223.68,66.15,135.68,18h0a15.88,15.88,0,0,0-15.36,0l-88,48.17a16,16,0,0,0-8.32,14v95.64a16,16,0,0,0,8.32,14l88,48.17a15.88,15.88,0,0,0,15.36,0l88-48.17a16,16,0,0,0,8.32-14V80.18A16,16,0,0,0,223.68,66.15ZM128,32h0l80.34,44L128,120,47.66,76ZM40,90l80,43.78v85.79L40,175.82Zm96,129.57V133.82L216,90v85.78Z"}))],["thin",c.createElement(c.Fragment,null,c.createElement("path",{d:"M221.76,69.66l-88-48.18a12,12,0,0,0-11.52,0l-88,48.18A12,12,0,0,0,28,80.18v95.64a12,12,0,0,0,6.24,10.52l88,48.18a11.95,11.95,0,0,0,11.52,0l88-48.18A12,12,0,0,0,228,175.82V80.18A12,12,0,0,0,221.76,69.66ZM126.08,28.5a3.94,3.94,0,0,1,3.84,0L216.67,76,128,124.52,39.33,76Zm-88,150.83A4,4,0,0,1,36,175.82V83.29l88,48.16v94.91Zm179.84,0-85.92,47V131.45l88-48.16v92.53A4,4,0,0,1,217.92,179.32Z"}))]]),H=c.forwardRef((e,t)=>c.createElement(h.default,{ref:t,...e,weights:S}));H.displayName="CubeIcon";let V=new Map([["bold",c.createElement(c.Fragment,null,c.createElement("path",{d:"M128,20A108,108,0,1,0,236,128,108.12,108.12,0,0,0,128,20Zm0,192a84,84,0,1,1,84-84A84.09,84.09,0,0,1,128,212ZM163.27,77l-56,24a12,12,0,0,0-6.3,6.3l-24,56A12,12,0,0,0,92.73,179l56-24a12,12,0,0,0,6.3-6.3l24-56A12,12,0,0,0,163.27,77Zm-28.41,57.89-24,10.29,10.29-24,24-10.29Z"}))],["duotone",c.createElement(c.Fragment,null,c.createElement("path",{d:"M128,32a96,96,0,1,0,96,96A96,96,0,0,0,128,32Zm16,112L80,176l32-64,64-32Z",opacity:"0.2"}),c.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216ZM172.42,72.84l-64,32a8.05,8.05,0,0,0-3.58,3.58l-32,64A8,8,0,0,0,80,184a8.1,8.1,0,0,0,3.58-.84l64-32a8.05,8.05,0,0,0,3.58-3.58l32-64a8,8,0,0,0-10.74-10.74ZM138,138,97.89,158.11,118,118l40.15-20.07Z"}))],["fill",c.createElement(c.Fragment,null,c.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm51.58,57.79-32,64a4.08,4.08,0,0,1-1.79,1.79l-64,32a4,4,0,0,1-5.37-5.37l32-64a4.08,4.08,0,0,1,1.79-1.79l64-32A4,4,0,0,1,179.58,81.79Z"}))],["light",c.createElement(c.Fragment,null,c.createElement("path",{d:"M128,26A102,102,0,1,0,230,128,102.12,102.12,0,0,0,128,26Zm0,192a90,90,0,1,1,90-90A90.1,90.1,0,0,1,128,218ZM173.32,74.63l-64,32a6,6,0,0,0-2.69,2.69l-32,64A6,6,0,0,0,80,182a6.06,6.06,0,0,0,2.68-.63l64-32a6,6,0,0,0,2.69-2.69l32-64a6,6,0,0,0-8.05-8.05Zm-33.79,64.9L93.42,162.58l23-46.11,46.11-23Z"}))],["regular",c.createElement(c.Fragment,null,c.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216ZM172.42,72.84l-64,32a8.05,8.05,0,0,0-3.58,3.58l-32,64A8,8,0,0,0,80,184a8.1,8.1,0,0,0,3.58-.84l64-32a8.05,8.05,0,0,0,3.58-3.58l32-64a8,8,0,0,0-10.74-10.74ZM138,138,97.89,158.11,118,118l40.15-20.07Z"}))],["thin",c.createElement(c.Fragment,null,c.createElement("path",{d:"M128,28A100,100,0,1,0,228,128,100.11,100.11,0,0,0,128,28Zm0,192a92,92,0,1,1,92-92A92.1,92.1,0,0,1,128,220ZM174.21,76.42l-64,32a4.08,4.08,0,0,0-1.79,1.79l-32,64A4,4,0,0,0,80,180a4.05,4.05,0,0,0,1.79-.42l64-32a4.08,4.08,0,0,0,1.79-1.79l32-64a4,4,0,0,0-5.37-5.37ZM141,141l-52.08,26L115,115l52.08-26Z"}))]]),A=c.forwardRef((e,t)=>c.createElement(h.default,{ref:t,...e,weights:V}));A.displayName="CompassIcon";let C=new Map([["bold",c.createElement(c.Fragment,null,c.createElement("path",{d:"M224,44H32A20,20,0,0,0,12,64V192a20,20,0,0,0,20,20H224a20,20,0,0,0,20-20V64A20,20,0,0,0,224,44Zm-4,144H36V68H220ZM52,128a12,12,0,0,1,12-12H192a12,12,0,0,1,0,24H64A12,12,0,0,1,52,128Zm0-36A12,12,0,0,1,64,80H192a12,12,0,0,1,0,24H64A12,12,0,0,1,52,92Zm0,72a12,12,0,0,1,12-12h8a12,12,0,0,1,0,24H64A12,12,0,0,1,52,164Zm108,0a12,12,0,0,1-12,12H108a12,12,0,0,1,0-24h40A12,12,0,0,1,160,164Zm44,0a12,12,0,0,1-12,12h-8a12,12,0,0,1,0-24h8A12,12,0,0,1,204,164Z"}))],["duotone",c.createElement(c.Fragment,null,c.createElement("path",{d:"M232,64V192a8,8,0,0,1-8,8H32a8,8,0,0,1-8-8V64a8,8,0,0,1,8-8H224A8,8,0,0,1,232,64Z",opacity:"0.2"}),c.createElement("path",{d:"M224,48H32A16,16,0,0,0,16,64V192a16,16,0,0,0,16,16H224a16,16,0,0,0,16-16V64A16,16,0,0,0,224,48Zm0,144H32V64H224V192Zm-16-64a8,8,0,0,1-8,8H56a8,8,0,0,1,0-16H200A8,8,0,0,1,208,128Zm0-32a8,8,0,0,1-8,8H56a8,8,0,0,1,0-16H200A8,8,0,0,1,208,96ZM72,160a8,8,0,0,1-8,8H56a8,8,0,0,1,0-16h8A8,8,0,0,1,72,160Zm96,0a8,8,0,0,1-8,8H96a8,8,0,0,1,0-16h64A8,8,0,0,1,168,160Zm40,0a8,8,0,0,1-8,8h-8a8,8,0,0,1,0-16h8A8,8,0,0,1,208,160Z"}))],["fill",c.createElement(c.Fragment,null,c.createElement("path",{d:"M224,48H32A16,16,0,0,0,16,64V192a16,16,0,0,0,16,16H224a16,16,0,0,0,16-16V64A16,16,0,0,0,224,48ZM64,168H48a8,8,0,0,1,0-16H64a8,8,0,0,1,0,16Zm96,0H96a8,8,0,0,1,0-16h64a8,8,0,0,1,0,16Zm48,0H192a8,8,0,0,1,0-16h16a8,8,0,0,1,0,16Zm0-32H48a8,8,0,0,1,0-16H208a8,8,0,0,1,0,16Zm0-32H48a8,8,0,0,1,0-16H208a8,8,0,0,1,0,16Z"}))],["light",c.createElement(c.Fragment,null,c.createElement("path",{d:"M224,50H32A14,14,0,0,0,18,64V192a14,14,0,0,0,14,14H224a14,14,0,0,0,14-14V64A14,14,0,0,0,224,50Zm2,142a2,2,0,0,1-2,2H32a2,2,0,0,1-2-2V64a2,2,0,0,1,2-2H224a2,2,0,0,1,2,2Zm-20-64a6,6,0,0,1-6,6H56a6,6,0,0,1,0-12H200A6,6,0,0,1,206,128Zm0-32a6,6,0,0,1-6,6H56a6,6,0,0,1,0-12H200A6,6,0,0,1,206,96ZM70,160a6,6,0,0,1-6,6H56a6,6,0,0,1,0-12h8A6,6,0,0,1,70,160Zm96,0a6,6,0,0,1-6,6H96a6,6,0,0,1,0-12h64A6,6,0,0,1,166,160Zm40,0a6,6,0,0,1-6,6h-8a6,6,0,0,1,0-12h8A6,6,0,0,1,206,160Z"}))],["regular",c.createElement(c.Fragment,null,c.createElement("path",{d:"M224,48H32A16,16,0,0,0,16,64V192a16,16,0,0,0,16,16H224a16,16,0,0,0,16-16V64A16,16,0,0,0,224,48Zm0,144H32V64H224V192Zm-16-64a8,8,0,0,1-8,8H56a8,8,0,0,1,0-16H200A8,8,0,0,1,208,128Zm0-32a8,8,0,0,1-8,8H56a8,8,0,0,1,0-16H200A8,8,0,0,1,208,96ZM72,160a8,8,0,0,1-8,8H56a8,8,0,0,1,0-16h8A8,8,0,0,1,72,160Zm96,0a8,8,0,0,1-8,8H96a8,8,0,0,1,0-16h64A8,8,0,0,1,168,160Zm40,0a8,8,0,0,1-8,8h-8a8,8,0,0,1,0-16h8A8,8,0,0,1,208,160Z"}))],["thin",c.createElement(c.Fragment,null,c.createElement("path",{d:"M224,52H32A12,12,0,0,0,20,64V192a12,12,0,0,0,12,12H224a12,12,0,0,0,12-12V64A12,12,0,0,0,224,52Zm4,140a4,4,0,0,1-4,4H32a4,4,0,0,1-4-4V64a4,4,0,0,1,4-4H224a4,4,0,0,1,4,4Zm-24-64a4,4,0,0,1-4,4H56a4,4,0,0,1,0-8H200A4,4,0,0,1,204,128Zm0-32a4,4,0,0,1-4,4H56a4,4,0,0,1,0-8H200A4,4,0,0,1,204,96ZM68,160a4,4,0,0,1-4,4H56a4,4,0,0,1,0-8h8A4,4,0,0,1,68,160Zm96,0a4,4,0,0,1-4,4H96a4,4,0,0,1,0-8h64A4,4,0,0,1,164,160Zm40,0a4,4,0,0,1-4,4h-8a4,4,0,0,1,0-8h8A4,4,0,0,1,204,160Z"}))]]),R=c.forwardRef((e,t)=>c.createElement(h.default,{ref:t,...e,weights:C}));R.displayName="KeyboardIcon";let Z=new Map([["bold",c.createElement(c.Fragment,null,c.createElement("path",{d:"M199,125.31l-49.88-18.39L130.69,57a19.92,19.92,0,0,0-37.38,0L74.92,106.92,25,125.31a19.92,19.92,0,0,0,0,37.38l49.88,18.39L93.31,231a19.92,19.92,0,0,0,37.38,0l18.39-49.88L199,162.69a19.92,19.92,0,0,0,0-37.38Zm-63.38,35.16a12,12,0,0,0-7.11,7.11L112,212.28l-16.47-44.7a12,12,0,0,0-7.11-7.11L43.72,144l44.7-16.47a12,12,0,0,0,7.11-7.11L112,75.72l16.47,44.7a12,12,0,0,0,7.11,7.11L180.28,144ZM140,40a12,12,0,0,1,12-12h12V16a12,12,0,0,1,24,0V28h12a12,12,0,0,1,0,24H188V64a12,12,0,0,1-24,0V52H152A12,12,0,0,1,140,40ZM252,88a12,12,0,0,1-12,12h-4v4a12,12,0,0,1-24,0v-4h-4a12,12,0,0,1,0-24h4V72a12,12,0,0,1,24,0v4h4A12,12,0,0,1,252,88Z"}))],["duotone",c.createElement(c.Fragment,null,c.createElement("path",{d:"M194.82,151.43l-55.09,20.3-20.3,55.09a7.92,7.92,0,0,1-14.86,0l-20.3-55.09-55.09-20.3a7.92,7.92,0,0,1,0-14.86l55.09-20.3,20.3-55.09a7.92,7.92,0,0,1,14.86,0l20.3,55.09,55.09,20.3A7.92,7.92,0,0,1,194.82,151.43Z",opacity:"0.2"}),c.createElement("path",{d:"M197.58,129.06,146,110l-19-51.62a15.92,15.92,0,0,0-29.88,0L78,110l-51.62,19a15.92,15.92,0,0,0,0,29.88L78,178l19,51.62a15.92,15.92,0,0,0,29.88,0L146,178l51.62-19a15.92,15.92,0,0,0,0-29.88ZM137,164.22a8,8,0,0,0-4.74,4.74L112,223.85,91.78,169A8,8,0,0,0,87,164.22L32.15,144,87,123.78A8,8,0,0,0,91.78,119L112,64.15,132.22,119a8,8,0,0,0,4.74,4.74L191.85,144ZM144,40a8,8,0,0,1,8-8h16V16a8,8,0,0,1,16,0V32h16a8,8,0,0,1,0,16H184V64a8,8,0,0,1-16,0V48H152A8,8,0,0,1,144,40ZM248,88a8,8,0,0,1-8,8h-8v8a8,8,0,0,1-16,0V96h-8a8,8,0,0,1,0-16h8V72a8,8,0,0,1,16,0v8h8A8,8,0,0,1,248,88Z"}))],["fill",c.createElement(c.Fragment,null,c.createElement("path",{d:"M208,144a15.78,15.78,0,0,1-10.42,14.94L146,178l-19,51.62a15.92,15.92,0,0,1-29.88,0L78,178l-51.62-19a15.92,15.92,0,0,1,0-29.88L78,110l19-51.62a15.92,15.92,0,0,1,29.88,0L146,110l51.62,19A15.78,15.78,0,0,1,208,144ZM152,48h16V64a8,8,0,0,0,16,0V48h16a8,8,0,0,0,0-16H184V16a8,8,0,0,0-16,0V32H152a8,8,0,0,0,0,16Zm88,32h-8V72a8,8,0,0,0-16,0v8h-8a8,8,0,0,0,0,16h8v8a8,8,0,0,0,16,0V96h8a8,8,0,0,0,0-16Z"}))],["light",c.createElement(c.Fragment,null,c.createElement("path",{d:"M196.89,130.94,144.4,111.6,125.06,59.11a13.92,13.92,0,0,0-26.12,0L79.6,111.6,27.11,130.94a13.92,13.92,0,0,0,0,26.12L79.6,176.4l19.34,52.49a13.92,13.92,0,0,0,26.12,0L144.4,176.4l52.49-19.34a13.92,13.92,0,0,0,0-26.12Zm-4.15,14.86-55.08,20.3a6,6,0,0,0-3.56,3.56l-20.3,55.08a1.92,1.92,0,0,1-3.6,0L89.9,169.66a6,6,0,0,0-3.56-3.56L31.26,145.8a1.92,1.92,0,0,1,0-3.6l55.08-20.3a6,6,0,0,0,3.56-3.56l20.3-55.08a1.92,1.92,0,0,1,3.6,0l20.3,55.08a6,6,0,0,0,3.56,3.56l55.08,20.3a1.92,1.92,0,0,1,0,3.6ZM146,40a6,6,0,0,1,6-6h18V16a6,6,0,0,1,12,0V34h18a6,6,0,0,1,0,12H182V64a6,6,0,0,1-12,0V46H152A6,6,0,0,1,146,40ZM246,88a6,6,0,0,1-6,6H230v10a6,6,0,0,1-12,0V94H208a6,6,0,0,1,0-12h10V72a6,6,0,0,1,12,0V82h10A6,6,0,0,1,246,88Z"}))],["regular",c.createElement(c.Fragment,null,c.createElement("path",{d:"M197.58,129.06,146,110l-19-51.62a15.92,15.92,0,0,0-29.88,0L78,110l-51.62,19a15.92,15.92,0,0,0,0,29.88L78,178l19,51.62a15.92,15.92,0,0,0,29.88,0L146,178l51.62-19a15.92,15.92,0,0,0,0-29.88ZM137,164.22a8,8,0,0,0-4.74,4.74L112,223.85,91.78,169A8,8,0,0,0,87,164.22L32.15,144,87,123.78A8,8,0,0,0,91.78,119L112,64.15,132.22,119a8,8,0,0,0,4.74,4.74L191.85,144ZM144,40a8,8,0,0,1,8-8h16V16a8,8,0,0,1,16,0V32h16a8,8,0,0,1,0,16H184V64a8,8,0,0,1-16,0V48H152A8,8,0,0,1,144,40ZM248,88a8,8,0,0,1-8,8h-8v8a8,8,0,0,1-16,0V96h-8a8,8,0,0,1,0-16h8V72a8,8,0,0,1,16,0v8h8A8,8,0,0,1,248,88Z"}))],["thin",c.createElement(c.Fragment,null,c.createElement("path",{d:"M196.2,132.81l-53.36-19.65L123.19,59.8a11.93,11.93,0,0,0-22.38,0L81.16,113.16,27.8,132.81a11.93,11.93,0,0,0,0,22.38l53.36,19.65,19.65,53.36a11.93,11.93,0,0,0,22.38,0l19.65-53.36,53.36-19.65a11.93,11.93,0,0,0,0-22.38Zm-2.77,14.87L138.35,168a4,4,0,0,0-2.37,2.37l-20.3,55.08a3.92,3.92,0,0,1-7.36,0L88,170.35A4,4,0,0,0,85.65,168l-55.08-20.3a3.92,3.92,0,0,1,0-7.36L85.65,120A4,4,0,0,0,88,117.65l20.3-55.08a3.92,3.92,0,0,1,7.36,0L136,117.65a4,4,0,0,0,2.37,2.37l55.08,20.3a3.92,3.92,0,0,1,0,7.36ZM148,40a4,4,0,0,1,4-4h20V16a4,4,0,0,1,8,0V36h20a4,4,0,0,1,0,8H180V64a4,4,0,0,1-8,0V44H152A4,4,0,0,1,148,40Zm96,48a4,4,0,0,1-4,4H228v12a4,4,0,0,1-8,0V92H208a4,4,0,0,1,0-8h12V72a4,4,0,0,1,8,0V84h12A4,4,0,0,1,244,88Z"}))]]),_=c.forwardRef((e,t)=>c.createElement(h.default,{ref:t,...e,weights:Z}));_.displayName="SparkleIcon";let F=new Map([["bold",c.createElement(c.Fragment,null,c.createElement("path",{d:"M216.49,79.52l-56-56A12,12,0,0,0,152,20H56A20,20,0,0,0,36,40V216a20,20,0,0,0,20,20H200a20,20,0,0,0,20-20V88A12,12,0,0,0,216.49,79.52ZM160,57l23,23H160ZM60,212V44h76V92a12,12,0,0,0,12,12h48V212Z"}))],["duotone",c.createElement(c.Fragment,null,c.createElement("path",{d:"M208,88H152V32Z",opacity:"0.2"}),c.createElement("path",{d:"M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40V216a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V88A8,8,0,0,0,213.66,82.34ZM160,51.31,188.69,80H160ZM200,216H56V40h88V88a8,8,0,0,0,8,8h48V216Z"}))],["fill",c.createElement(c.Fragment,null,c.createElement("path",{d:"M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40V216a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V88A8,8,0,0,0,213.66,82.34ZM152,88V44l44,44Z"}))],["light",c.createElement(c.Fragment,null,c.createElement("path",{d:"M212.24,83.76l-56-56A6,6,0,0,0,152,26H56A14,14,0,0,0,42,40V216a14,14,0,0,0,14,14H200a14,14,0,0,0,14-14V88A6,6,0,0,0,212.24,83.76ZM158,46.48,193.52,82H158ZM200,218H56a2,2,0,0,1-2-2V40a2,2,0,0,1,2-2h90V88a6,6,0,0,0,6,6h50V216A2,2,0,0,1,200,218Z"}))],["regular",c.createElement(c.Fragment,null,c.createElement("path",{d:"M213.66,82.34l-56-56A8,8,0,0,0,152,24H56A16,16,0,0,0,40,40V216a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V88A8,8,0,0,0,213.66,82.34ZM160,51.31,188.69,80H160ZM200,216H56V40h88V88a8,8,0,0,0,8,8h48V216Z"}))],["thin",c.createElement(c.Fragment,null,c.createElement("path",{d:"M210.83,85.17l-56-56A4,4,0,0,0,152,28H56A12,12,0,0,0,44,40V216a12,12,0,0,0,12,12H200a12,12,0,0,0,12-12V88A4,4,0,0,0,210.83,85.17ZM156,41.65,198.34,84H156ZM200,220H56a4,4,0,0,1-4-4V40a4,4,0,0,1,4-4h92V88a4,4,0,0,0,4,4h52V216A4,4,0,0,1,200,220Z"}))]]),k=c.forwardRef((e,t)=>c.createElement(h.default,{ref:t,...e,weights:F}));k.displayName="FileIcon";var L=e.i(67881),D=e.i(62870),P=e.i(81140),I=e.i(20783),z=e.i(30030),q=e.i(26330),O=e.i(3536),T=e.i(65491),$=e.i(10772),B=e.i(53660),K=e.i(74606),U=e.i(96626),W=e.i(48425),G=Symbol("radix.slottable");function J(e){return c.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===G}var Y=e.i(69340),X=e.i(86312),Q=e.i(85369),ee="Popover",[et,er]=(0,z.createContextScope)(ee,[B.createPopperScope]),ea=(0,B.createPopperScope)(),[en,el]=et(ee),es=e=>{let{__scopePopover:t,children:r,open:a,defaultOpen:n,onOpenChange:l,modal:s=!1}=e,o=ea(t),d=c.useRef(null),[u,m]=c.useState(!1),[h,p]=(0,Y.useControllableState)({prop:a,defaultProp:n??!1,onChange:l,caller:ee});return(0,i.jsx)(B.Root,{...o,children:(0,i.jsx)(en,{scope:t,contentId:(0,$.useId)(),triggerRef:d,open:h,onOpenChange:p,onOpenToggle:c.useCallback(()=>p(e=>!e),[p]),hasCustomAnchor:u,onCustomAnchorAdd:c.useCallback(()=>m(!0),[]),onCustomAnchorRemove:c.useCallback(()=>m(!1),[]),modal:s,children:r})})};es.displayName=ee;var ei="PopoverAnchor";c.forwardRef((e,t)=>{let{__scopePopover:r,...a}=e,n=el(ei,r),l=ea(r),{onCustomAnchorAdd:s,onCustomAnchorRemove:o}=n;return c.useEffect(()=>(s(),()=>o()),[s,o]),(0,i.jsx)(B.Anchor,{...l,...a,ref:t})}).displayName=ei;var eo="PopoverTrigger",ec=c.forwardRef((e,t)=>{let{__scopePopover:r,...a}=e,n=el(eo,r),l=ea(r),s=(0,I.useComposedRefs)(t,n.triggerRef),o=(0,i.jsx)(W.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":ej(n.open),...a,ref:s,onClick:(0,P.composeEventHandlers)(e.onClick,n.onOpenToggle)});return n.hasCustomAnchor?o:(0,i.jsx)(B.Anchor,{asChild:!0,...l,children:o})});ec.displayName=eo;var ed="PopoverPortal",[eu,em]=et(ed,{forceMount:void 0}),eh=e=>{let{__scopePopover:t,forceMount:r,children:a,container:n}=e,l=el(ed,t);return(0,i.jsx)(eu,{scope:t,forceMount:r,children:(0,i.jsx)(U.Presence,{present:r||l.open,children:(0,i.jsx)(K.Portal,{asChild:!0,container:n,children:a})})})};eh.displayName=ed;var ep="PopoverContent",ef=c.forwardRef((e,t)=>{let r=em(ep,e.__scopePopover),{forceMount:a=r.forceMount,...n}=e,l=el(ep,e.__scopePopover);return(0,i.jsx)(U.Presence,{present:a||l.open,children:l.modal?(0,i.jsx)(ex,{...n,ref:t}):(0,i.jsx)(eb,{...n,ref:t})})});ef.displayName=ep;var eg=((l=c.forwardRef((e,t)=>{let{children:r,...a}=e;if(c.isValidElement(r)){var n;let e,l,s=(n=r,(l=(e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.ref:(l=(e=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.props.ref:n.props.ref||n.ref),i=function(e,t){let r={...t};for(let a in t){let n=e[a],l=t[a];/^on[A-Z]/.test(a)?n&&l?r[a]=(...e)=>{let t=l(...e);return n(...e),t}:n&&(r[a]=n):"style"===a?r[a]={...n,...l}:"className"===a&&(r[a]=[n,l].filter(Boolean).join(" "))}return{...e,...r}}(a,r.props);return r.type!==c.Fragment&&(i.ref=t?(0,I.composeRefs)(t,s):s),c.cloneElement(r,i)}return c.Children.count(r)>1?c.Children.only(null):null})).displayName="PopoverContent.RemoveScroll.SlotClone",t=l,(r=c.forwardRef((e,r)=>{let{children:a,...n}=e,l=c.Children.toArray(a),s=l.find(J);if(s){let e=s.props.children,a=l.map(t=>t!==s?t:c.Children.count(e)>1?c.Children.only(null):c.isValidElement(e)?e.props.children:null);return(0,i.jsx)(t,{...n,ref:r,children:c.isValidElement(e)?c.cloneElement(e,void 0,a):null})}return(0,i.jsx)(t,{...n,ref:r,children:a})})).displayName="PopoverContent.RemoveScroll.Slot",r),ex=c.forwardRef((e,t)=>{let r=el(ep,e.__scopePopover),a=c.useRef(null),n=(0,I.useComposedRefs)(t,a),l=c.useRef(!1);return c.useEffect(()=>{let e=a.current;if(e)return(0,X.hideOthers)(e)},[]),(0,i.jsx)(Q.RemoveScroll,{as:eg,allowPinchZoom:!0,children:(0,i.jsx)(ev,{...e,ref:n,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,P.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),l.current||r.triggerRef.current?.focus()}),onPointerDownOutside:(0,P.composeEventHandlers)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;l.current=2===t.button||r},{checkForDefaultPrevented:!1}),onFocusOutside:(0,P.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),eb=c.forwardRef((e,t)=>{let r=el(ep,e.__scopePopover),a=c.useRef(!1),n=c.useRef(!1);return(0,i.jsx)(ev,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(a.current||r.triggerRef.current?.focus(),t.preventDefault()),a.current=!1,n.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(a.current=!0,"pointerdown"===t.detail.originalEvent.type&&(n.current=!0));let l=t.target;r.triggerRef.current?.contains(l)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&n.current&&t.preventDefault()}})}),ev=c.forwardRef((e,t)=>{let{__scopePopover:r,trapFocus:a,onOpenAutoFocus:n,onCloseAutoFocus:l,disableOutsidePointerEvents:s,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...m}=e,h=el(ep,r),p=ea(r);return(0,O.useFocusGuards)(),(0,i.jsx)(T.FocusScope,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:n,onUnmountAutoFocus:l,children:(0,i.jsx)(q.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:u,onEscapeKeyDown:o,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>h.onOpenChange(!1),children:(0,i.jsx)(B.Content,{"data-state":ej(h.open),role:"dialog",id:h.contentId,...p,...m,ref:t,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),ey="PopoverClose";function ej(e){return e?"open":"closed"}c.forwardRef((e,t)=>{let{__scopePopover:r,...a}=e,n=el(ey,r);return(0,i.jsx)(W.Primitive.button,{type:"button",...a,ref:t,onClick:(0,P.composeEventHandlers)(e.onClick,()=>n.onOpenChange(!1))})}).displayName=ey,c.forwardRef((e,t)=>{let{__scopePopover:r,...a}=e,n=ea(r);return(0,i.jsx)(B.Arrow,{...n,...a,ref:t})}).displayName="PopoverArrow";var ew=e.i(47163);let eM=c.forwardRef(({className:e,align:t="center",sideOffset:r=4,...a},n)=>(0,i.jsx)(eh,{children:(0,i.jsx)(ef,{ref:n,align:t,sideOffset:r,className:(0,ew.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",e),...a})}));eM.displayName=ef.displayName,e.i(74080);var eN=e.i(91918),eE=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=(0,eN.createSlot)(`Primitive.${t}`),a=c.forwardRef((e,a)=>{let{asChild:n,...l}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,i.jsx)(n?r:t,{...l,ref:a})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{}),eS="horizontal",eH=["horizontal","vertical"],eV=c.forwardRef((e,t)=>{var r;let{decorative:a,orientation:n=eS,...l}=e,s=(r=n,eH.includes(r))?n:eS;return(0,i.jsx)(eE.div,{"data-orientation":s,...a?{role:"none"}:{"aria-orientation":"vertical"===s?s:void 0,role:"separator"},...l,ref:t})});eV.displayName="Separator";let eA=c.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...a},n)=>(0,i.jsx)(eV,{ref:n,decorative:r,orientation:t,className:(0,ew.cn)("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",e),...a}));eA.displayName=eV.displayName;var eC=e.i(27341),eR=e.i(71435),eZ=e.i(28231),e_=e.i(10708),eF=Symbol("radix.slottable");function ek(e){return c.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===eF}var eL="Dialog",[eD,eP]=(0,z.createContextScope)(eL),[eI,ez]=eD(eL),eq=e=>{let{__scopeDialog:t,children:r,open:a,defaultOpen:n,onOpenChange:l,modal:s=!0}=e,o=c.useRef(null),d=c.useRef(null),[u,m]=(0,Y.useControllableState)({prop:a,defaultProp:n??!1,onChange:l,caller:eL});return(0,i.jsx)(eI,{scope:t,triggerRef:o,contentRef:d,contentId:(0,$.useId)(),titleId:(0,$.useId)(),descriptionId:(0,$.useId)(),open:u,onOpenChange:m,onOpenToggle:c.useCallback(()=>m(e=>!e),[m]),modal:s,children:r})};eq.displayName=eL;var eO="DialogTrigger";c.forwardRef((e,t)=>{let{__scopeDialog:r,...a}=e,n=ez(eO,r),l=(0,I.useComposedRefs)(t,n.triggerRef);return(0,i.jsx)(W.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":e7(n.open),...a,ref:l,onClick:(0,P.composeEventHandlers)(e.onClick,n.onOpenToggle)})}).displayName=eO;var eT="DialogPortal",[e$,eB]=eD(eT,{forceMount:void 0}),eK=e=>{let{__scopeDialog:t,forceMount:r,children:a,container:n}=e,l=ez(eT,t);return(0,i.jsx)(e$,{scope:t,forceMount:r,children:c.Children.map(a,e=>(0,i.jsx)(U.Presence,{present:r||l.open,children:(0,i.jsx)(K.Portal,{asChild:!0,container:n,children:e})}))})};eK.displayName=eT;var eU="DialogOverlay",eW=c.forwardRef((e,t)=>{let r=eB(eU,e.__scopeDialog),{forceMount:a=r.forceMount,...n}=e,l=ez(eU,e.__scopeDialog);return l.modal?(0,i.jsx)(U.Presence,{present:a||l.open,children:(0,i.jsx)(eJ,{...n,ref:t})}):null});eW.displayName=eU;var eG=((s=c.forwardRef((e,t)=>{let{children:r,...a}=e;if(c.isValidElement(r)){var n;let e,l,s=(n=r,(l=(e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.ref:(l=(e=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?n.props.ref:n.props.ref||n.ref),i=function(e,t){let r={...t};for(let a in t){let n=e[a],l=t[a];/^on[A-Z]/.test(a)?n&&l?r[a]=(...e)=>{let t=l(...e);return n(...e),t}:n&&(r[a]=n):"style"===a?r[a]={...n,...l}:"className"===a&&(r[a]=[n,l].filter(Boolean).join(" "))}return{...e,...r}}(a,r.props);return r.type!==c.Fragment&&(i.ref=t?(0,I.composeRefs)(t,s):s),c.cloneElement(r,i)}return c.Children.count(r)>1?c.Children.only(null):null})).displayName="DialogOverlay.RemoveScroll.SlotClone",a=s,(n=c.forwardRef((e,t)=>{let{children:r,...n}=e,l=c.Children.toArray(r),s=l.find(ek);if(s){let e=s.props.children,r=l.map(t=>t!==s?t:c.Children.count(e)>1?c.Children.only(null):c.isValidElement(e)?e.props.children:null);return(0,i.jsx)(a,{...n,ref:t,children:c.isValidElement(e)?c.cloneElement(e,void 0,r):null})}return(0,i.jsx)(a,{...n,ref:t,children:r})})).displayName="DialogOverlay.RemoveScroll.Slot",n),eJ=c.forwardRef((e,t)=>{let{__scopeDialog:r,...a}=e,n=ez(eU,r);return(0,i.jsx)(Q.RemoveScroll,{as:eG,allowPinchZoom:!0,shards:[n.contentRef],children:(0,i.jsx)(W.Primitive.div,{"data-state":e7(n.open),...a,ref:t,style:{pointerEvents:"auto",...a.style}})})}),eY="DialogContent",eX=c.forwardRef((e,t)=>{let r=eB(eY,e.__scopeDialog),{forceMount:a=r.forceMount,...n}=e,l=ez(eY,e.__scopeDialog);return(0,i.jsx)(U.Presence,{present:a||l.open,children:l.modal?(0,i.jsx)(eQ,{...n,ref:t}):(0,i.jsx)(e0,{...n,ref:t})})});eX.displayName=eY;var eQ=c.forwardRef((e,t)=>{let r=ez(eY,e.__scopeDialog),a=c.useRef(null),n=(0,I.useComposedRefs)(t,r.contentRef,a);return c.useEffect(()=>{let e=a.current;if(e)return(0,X.hideOthers)(e)},[]),(0,i.jsx)(e1,{...e,ref:n,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,P.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:(0,P.composeEventHandlers)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;(2===t.button||r)&&e.preventDefault()}),onFocusOutside:(0,P.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault())})}),e0=c.forwardRef((e,t)=>{let r=ez(eY,e.__scopeDialog),a=c.useRef(!1),n=c.useRef(!1);return(0,i.jsx)(e1,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(a.current||r.triggerRef.current?.focus(),t.preventDefault()),a.current=!1,n.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(a.current=!0,"pointerdown"===t.detail.originalEvent.type&&(n.current=!0));let l=t.target;r.triggerRef.current?.contains(l)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&n.current&&t.preventDefault()}})}),e1=c.forwardRef((e,t)=>{let{__scopeDialog:r,trapFocus:a,onOpenAutoFocus:n,onCloseAutoFocus:l,...s}=e,o=ez(eY,r),d=c.useRef(null),u=(0,I.useComposedRefs)(t,d);return(0,O.useFocusGuards)(),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(T.FocusScope,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:n,onUnmountAutoFocus:l,children:(0,i.jsx)(q.DismissableLayer,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":e7(o.open),...s,ref:u,onDismiss:()=>o.onOpenChange(!1)})}),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tr,{titleId:o.titleId}),(0,i.jsx)(ta,{contentRef:d,descriptionId:o.descriptionId})]})]})}),e2="DialogTitle",e8=c.forwardRef((e,t)=>{let{__scopeDialog:r,...a}=e,n=ez(e2,r);return(0,i.jsx)(W.Primitive.h2,{id:n.titleId,...a,ref:t})});e8.displayName=e2;var e6="DialogDescription",e4=c.forwardRef((e,t)=>{let{__scopeDialog:r,...a}=e,n=ez(e6,r);return(0,i.jsx)(W.Primitive.p,{id:n.descriptionId,...a,ref:t})});e4.displayName=e6;var e3="DialogClose",e5=c.forwardRef((e,t)=>{let{__scopeDialog:r,...a}=e,n=ez(e3,r);return(0,i.jsx)(W.Primitive.button,{type:"button",...a,ref:t,onClick:(0,P.composeEventHandlers)(e.onClick,()=>n.onOpenChange(!1))})});function e7(e){return e?"open":"closed"}e5.displayName=e3;var e9="DialogTitleWarning",[te,tt]=(0,z.createContext)(e9,{contentName:eY,titleName:e2,docsSlug:"dialog"}),tr=({titleId:e})=>{let t=tt(e9),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return c.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},ta=({contentRef:e,descriptionId:t})=>{let r=tt("DialogDescriptionWarning"),a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${r.contentName}}.`;return c.useEffect(()=>{let r=e.current?.getAttribute("aria-describedby");t&&r&&(document.getElementById(t)||console.warn(a))},[a,e,t]),null},tn=e.i(75254);let tl=(0,tn.default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ts=c.forwardRef(({className:e,...t},r)=>(0,i.jsx)(eW,{ref:r,className:(0,ew.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));ts.displayName=eW.displayName;let ti=c.forwardRef(({className:e,children:t,...r},a)=>(0,i.jsxs)(eK,{children:[(0,i.jsx)(ts,{}),(0,i.jsxs)(eX,{ref:a,className:(0,ew.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,(0,i.jsxs)(e5,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,i.jsx)(tl,{className:"h-4 w-4"}),(0,i.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));ti.displayName=eX.displayName;let to=({className:e,...t})=>(0,i.jsx)("div",{className:(0,ew.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});to.displayName="DialogHeader";let tc=({className:e,...t})=>(0,i.jsx)("div",{className:(0,ew.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});tc.displayName="DialogFooter";let td=c.forwardRef(({className:e,...t},r)=>(0,i.jsx)(e8,{ref:r,className:(0,ew.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));td.displayName=e8.displayName;let tu=c.forwardRef(({className:e,...t},r)=>(0,i.jsx)(e4,{ref:r,className:(0,ew.cn)("text-sm text-muted-foreground",e),...t}));tu.displayName=e4.displayName;var tm=e.i(23750);let th=c.forwardRef(({className:e,...t},r)=>(0,i.jsx)("textarea",{className:(0,ew.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));th.displayName="Textarea";let tp=(0,tn.default)("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),tf=(0,tn.default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);function tg({open:e,onOpenChange:t,onSave:r,defaultName:a}){let[n,l]=(0,c.useState)(""),[s,o]=(0,c.useState)(""),[d,u]=(0,c.useState)(""),[m,h]=(0,c.useState)(""),p=(0,c.useCallback)(e=>{let t=e.replace(/[^a-z0-9\s-_]/gi,"").replace(/\s+/g,"_").toLowerCase(),r=Date.now();h(`${t||"warlords-map"}-${r}.json`)},[]);(0,c.useEffect)(()=>{if(e){let e=new Date,t=a||`Map ${e.toLocaleDateString()} ${e.toLocaleTimeString()}`;l(t),o(""),u(""),p(t)}},[e,a,p]);let f=async()=>{try{if(window.showDirectoryPicker){let e=await window.showDirectoryPicker();u(e.name)}else{let e=document.createElement("input");e.type="file",e.webkitdirectory=!0,e.onchange=e=>{let t=e.target.files;if(t&&t.length>0){let e=t[0].webkitRelativePath.split("/");e.length>1&&u(e[0])}},e.click()}}catch(e){e instanceof Error&&"AbortError"!==e.name&&console.error("Error selecting folder:",e)}},g=()=>{n.trim()&&r({name:n.trim(),description:s.trim(),folder:d||"Downloads",filename:m})};return(0,i.jsx)(eq,{open:e,onOpenChange:t,children:(0,i.jsxs)(ti,{className:"sm:max-w-[500px]",onKeyDown:e=>{"Enter"===e.key&&(e.ctrlKey||e.metaKey)&&g()},children:[(0,i.jsxs)(to,{children:[(0,i.jsxs)(td,{className:"flex items-center gap-2",children:[(0,i.jsx)(tf,{className:"h-5 w-5"}),"Save Map"]}),(0,i.jsx)(tu,{children:"Save your map with metadata and choose save location"})]}),(0,i.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,i.jsxs)("div",{className:"grid gap-2",children:[(0,i.jsx)(e_.Label,{htmlFor:"map-name",children:"Map Name *"}),(0,i.jsx)(tm.Input,{id:"map-name",value:n,onChange:e=>{var t;l(t=e.target.value),p(t)},placeholder:"Enter map name",className:"w-full"})]}),(0,i.jsxs)("div",{className:"grid gap-2",children:[(0,i.jsx)(e_.Label,{htmlFor:"map-description",children:"Description"}),(0,i.jsx)(th,{id:"map-description",value:s,onChange:e=>o(e.target.value),placeholder:"Optional description of your map...",className:"min-h-[80px] resize-none"})]}),(0,i.jsxs)("div",{className:"grid gap-2",children:[(0,i.jsx)(e_.Label,{htmlFor:"folder-select",children:"Save Location"}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(tm.Input,{id:"folder-select",value:d||"Downloads (default)",placeholder:"Click Browse to select folder",readOnly:!0,className:"flex-1"}),(0,i.jsxs)(L.Button,{variant:"outline",onClick:f,className:"gap-2",type:"button",children:[(0,i.jsx)(tp,{className:"h-4 w-4"}),"Browse"]})]}),(0,i.jsx)("p",{className:"text-xs text-muted-foreground",children:d?`Files will be saved to: ${d}`:"Files will be saved to your Downloads folder by default"})]})]}),(0,i.jsxs)(tc,{children:[(0,i.jsx)(L.Button,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),(0,i.jsxs)(L.Button,{onClick:g,disabled:!n.trim(),className:"gap-2",children:[(0,i.jsx)(tf,{className:"h-4 w-4"}),"Save Map"]})]}),(0,i.jsx)("div",{className:"text-xs text-muted-foreground mt-2",children:"Tip: Press Ctrl+Enter to save quickly"})]})})}let tx=(0,tn.default)("file-x",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m14.5 12.5-5 5",key:"b62r18"}],["path",{d:"m9.5 12.5 5 5",key:"1rk7el"}]]);var tb=e.i(99682),tv=e.i(35804),ty="Checkbox",[tj,tw]=(0,z.createContextScope)(ty),[tM,tN]=tj(ty);function tE(e){let{__scopeCheckbox:t,checked:r,children:a,defaultChecked:n,disabled:l,form:s,name:o,onCheckedChange:d,required:u,value:m="on",internal_do_not_use_render:h}=e,[p,f]=(0,Y.useControllableState)({prop:r,defaultProp:n??!1,onChange:d,caller:ty}),[g,x]=c.useState(null),[b,v]=c.useState(null),y=c.useRef(!1),j=!g||!!s||!!g.closest("form"),w={checked:p,disabled:l,setChecked:f,control:g,setControl:x,name:o,form:s,value:m,hasConsumerStoppedPropagationRef:y,required:u,defaultChecked:!t_(n)&&n,isFormControl:j,bubbleInput:b,setBubbleInput:v};return(0,i.jsx)(tM,{scope:t,...w,children:"function"==typeof h?h(w):a})}var tS="CheckboxTrigger",tH=c.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...a},n)=>{let{control:l,value:s,disabled:o,checked:d,required:u,setControl:m,setChecked:h,hasConsumerStoppedPropagationRef:p,isFormControl:f,bubbleInput:g}=tN(tS,e),x=(0,I.useComposedRefs)(n,m),b=c.useRef(d);return c.useEffect(()=>{let e=l?.form;if(e){let t=()=>h(b.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[l,h]),(0,i.jsx)(W.Primitive.button,{type:"button",role:"checkbox","aria-checked":t_(d)?"mixed":d,"aria-required":u,"data-state":tF(d),"data-disabled":o?"":void 0,disabled:o,value:s,...a,ref:x,onKeyDown:(0,P.composeEventHandlers)(t,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,P.composeEventHandlers)(r,e=>{h(e=>!!t_(e)||!e),g&&f&&(p.current=e.isPropagationStopped(),p.current||e.stopPropagation())})})});tH.displayName=tS;var tV=c.forwardRef((e,t)=>{let{__scopeCheckbox:r,name:a,checked:n,defaultChecked:l,required:s,disabled:o,value:c,onCheckedChange:d,form:u,...m}=e;return(0,i.jsx)(tE,{__scopeCheckbox:r,checked:n,defaultChecked:l,disabled:o,required:s,onCheckedChange:d,name:a,form:u,value:c,internal_do_not_use_render:({isFormControl:e})=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tH,{...m,ref:t,__scopeCheckbox:r}),e&&(0,i.jsx)(tZ,{__scopeCheckbox:r})]})})});tV.displayName=ty;var tA="CheckboxIndicator",tC=c.forwardRef((e,t)=>{let{__scopeCheckbox:r,forceMount:a,...n}=e,l=tN(tA,r);return(0,i.jsx)(U.Presence,{present:a||t_(l.checked)||!0===l.checked,children:(0,i.jsx)(W.Primitive.span,{"data-state":tF(l.checked),"data-disabled":l.disabled?"":void 0,...n,ref:t,style:{pointerEvents:"none",...e.style}})})});tC.displayName=tA;var tR="CheckboxBubbleInput",tZ=c.forwardRef(({__scopeCheckbox:e,...t},r)=>{let{control:a,hasConsumerStoppedPropagationRef:n,checked:l,defaultChecked:s,required:o,disabled:d,name:u,value:m,form:h,bubbleInput:p,setBubbleInput:f}=tN(tR,e),g=(0,I.useComposedRefs)(r,f),x=(0,tb.usePrevious)(l),b=(0,tv.useSize)(a);c.useEffect(()=>{if(!p)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!n.current;if(x!==l&&e){let r=new Event("click",{bubbles:t});p.indeterminate=t_(l),e.call(p,!t_(l)&&l),p.dispatchEvent(r)}},[p,x,l,n]);let v=c.useRef(!t_(l)&&l);return(0,i.jsx)(W.Primitive.input,{type:"checkbox","aria-hidden":!0,defaultChecked:s??v.current,required:o,disabled:d,name:u,value:m,form:h,...t,tabIndex:-1,ref:g,style:{...t.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function t_(e){return"indeterminate"===e}function tF(e){return t_(e)?"indeterminate":e?"checked":"unchecked"}tZ.displayName=tR;var tk=e.i(43531);let tL=c.forwardRef(({className:e,...t},r)=>(0,i.jsx)(tV,{ref:r,className:(0,ew.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:(0,i.jsx)(tC,{className:(0,ew.cn)("flex items-center justify-center text-current"),children:(0,i.jsx)(tk.Check,{className:"h-4 w-4"})})}));tL.displayName=tV.displayName;var tD=e.i(87188);let tP=Promise.resolve(),tI=null,tz=null,tq=null;function tO({obj:e,mtl:t,className:r}){let a=(0,c.useRef)(null),[n,l]=(0,c.useState)(!1),s=(0,c.useRef)(`preview_${Date.now()}_${Math.random()}`);return(0,c.useEffect)(()=>{let r=(()=>{if(!tI)try{(tI=new u.WebGLRenderer({alpha:!0,antialias:!0,preserveDrawingBuffer:!0})).setPixelRatio(1),tI.setSize(120,120),tz=new d.Scene;let e=new d.AmbientLight(0xffffff,.8);tz.add(e);let t=new d.HemisphereLight(0xffffff,4473924,1);tz.add(t);let r=new d.DirectionalLight(0xffffff,1.2);r.position.set(5,10,7.5),tz.add(r);let a=new d.DirectionalLight(0xffffff,.6);a.position.set(-5,5,-5),tz.add(a),(tq=new d.PerspectiveCamera(45,1,.1,1e3)).position.set(4,4,4),tq.lookAt(0,0,0)}catch(e){return console.error("Failed to init shared preview renderer:",e),null}return{renderer:tI,scene:tz,camera:tq}})();if(!r||!a.current)return;l(!1);let n=a.current.getContext("2d");n&&n.clearRect(0,0,120,120);let i=!0,{renderer:o,scene:c,camera:m}=r,h=s.current,p=null;return tD.modelLoader.loadModel(`${e}_preview`,e,t).then(e=>{if(!i)return;let t=e.clone(),r=new d.Box3().setFromObject(t),n=r.getCenter(new d.Vector3),s=r.getSize(new d.Vector3),u=3.8/(Math.max(s.x,s.y,s.z)||1);t.scale.set(u,u,u);let f=n.clone().multiplyScalar(u);t.position.sub(f),t.rotation.y=Math.PI/2,tP=tP.then(()=>new Promise(e=>{if(!i)return void e();let r=c.getObjectByName(h);r&&c.remove(r),(p=new d.Group).name=h,p.add(t),c.add(p),((e,t=3e3)=>{let r=[];return(e.traverse(e=>{if(e instanceof d.Mesh){let t=e.material;(Array.isArray(t)?t:[t]).forEach(e=>{(e instanceof d.MeshStandardMaterial||e instanceof d.MeshPhongMaterial||e instanceof d.MeshLambertMaterial)&&(e.map&&!r.includes(e.map)&&r.push(e.map),e.normalMap&&!r.includes(e.normalMap)&&r.push(e.normalMap),e.aoMap&&!r.includes(e.aoMap)&&r.push(e.aoMap),e.emissiveMap&&!r.includes(e.emissiveMap)&&r.push(e.emissiveMap),e instanceof d.MeshStandardMaterial&&(e.roughnessMap&&!r.includes(e.roughnessMap)&&r.push(e.roughnessMap),e.metalnessMap&&!r.includes(e.metalnessMap)&&r.push(e.metalnessMap)))})}}),0===r.length)?new Promise(e=>{requestAnimationFrame(()=>e())}):Promise.all(r.map(e=>new Promise(r=>{if(!e.image){let a=setInterval(()=>{e.image&&(clearInterval(a),clearTimeout(n),r())},50),n=setTimeout(()=>{clearInterval(a),r()},t);return}let a=e.image;if(a instanceof HTMLCanvasElement||a instanceof ImageBitmap||a instanceof VideoFrame)return void r();if(a instanceof HTMLImageElement){if(a.complete&&a.naturalWidth>0)return void r();let e=!1,n=setTimeout(()=>{e||(e=!0,r())},t),l=a.onload,s=a.onerror;a.onload=()=>{e||(e=!0,clearTimeout(n),l&&l.call(a,new Event("load")),r())},a.onerror=()=>{e||(e=!0,clearTimeout(n),s&&s.call(a,new ErrorEvent("error")),r())}}else r()}))).then(()=>new Promise(e=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{e()})})}))})(t,3e3).then(()=>{if(!i||!p)return void e();o.setClearColor(0,0),o.render(c,m);let t=a.current?.getContext("2d");t&&a.current&&(t.clearRect(0,0,120,120),t.drawImage(o.domElement,0,0,120,120,0,0,120,120),i&&l(!0)),p&&(c.remove(p),p=null),e()}).catch(()=>{if(!i||!p)return void e();o.setClearColor(0,0),o.render(c,m);let t=a.current?.getContext("2d");t&&a.current&&(t.clearRect(0,0,120,120),t.drawImage(o.domElement,0,0,120,120,0,0,120,120),i&&l(!0)),p&&(c.remove(p),p=null),e()})}))}).catch(e=>console.error("Preview load error:",e)),()=>{i=!1,tP=tP.then(()=>{let e=c.getObjectByName(h);e&&c.remove(e)})}},[e,t]),(0,i.jsxs)("div",{className:(0,ew.cn)("relative w-full h-full bg-muted/20 rounded-lg overflow-hidden flex items-center justify-center",r),children:[!n&&(0,i.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,i.jsx)(H,{className:"animate-spin text-muted-foreground/30",size:24})}),(0,i.jsx)("canvas",{ref:a,width:120,height:120,className:(0,ew.cn)("w-full h-full pointer-events-none transition-opacity duration-300",n?"opacity-100":"opacity-0")})]})}var tT=e.i(22122);let t$=tT.default;tT.default;let tB={tiny:{label:"Tiny (1010)",width:10,height:10},small:{label:"Small (2525)",width:25,height:25},medium:{label:"Medium (5050)",width:50,height:50},large:{label:"Large (7575)",width:75,height:75},"very-large":{label:"Very Large (100100)",width:100,height:100}};function tK({open:e,onOpenChange:t,onConfirm:r}){let[a,n]=(0,c.useState)("tiny"),[l,s]=(0,c.useState)(!1),[o,d]=(0,c.useState)(null),[u,h]=(0,c.useState)([]);(0,c.useEffect)(()=>{(async()=>{try{let e=[];try{console.log("NewMapDialog: Trying static import..."),e=t$?.tiles||t$||[],console.log("NewMapDialog: Static import tiles:",e.length)}catch(e){console.error("NewMapDialog: Static import failed:",e)}if(0===e.length)try{console.log("NewMapDialog: Trying fetch approach...");let t=await fetch("/Medieval-Hexagon-Map-Editor/lib/llm/tile-registry.json");if(t.ok){let r=await t.json();e=r?.tiles||r||[],console.log("NewMapDialog: Fetch tiles:",e.length)}else console.error("NewMapDialog: Fetch failed with status:",t.status)}catch(e){console.error("NewMapDialog: Fetch approach failed:",e)}console.log("NewMapDialog: Final loaded tiles:",e.length);let t=e.filter(e=>"tiles"===e.category&&"base"===e.subcategory);console.log("NewMapDialog: Base tiles found:",t.length),h(t)}catch(e){console.error("NewMapDialog: Failed to load base tiles:",e)}})()},[]),(0,c.useEffect)(()=>{l&&u.length>0&&!o&&d(u[0])},[l,u,o]),(0,c.useEffect)(()=>{e||d(null)},[e]);let p=()=>{(!l||o)&&(r(a,l,o||void 0),t(!1))};return(0,i.jsx)(eq,{open:e,onOpenChange:t,children:(0,i.jsxs)(ti,{className:"sm:max-w-[450px]",onKeyDown:e=>{"Enter"===e.key&&(e.ctrlKey||e.metaKey)&&p()},children:[(0,i.jsxs)(to,{children:[(0,i.jsxs)(td,{className:"flex items-center gap-2",children:[(0,i.jsx)(tx,{size:20,className:"text-primary"}),"New Map"]}),(0,i.jsx)(tu,{children:"Create a new map. Choose the size for your new map."})]}),(0,i.jsxs)("div",{className:"space-y-4 py-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(e_.Label,{htmlFor:"map-size",children:"Map Size"}),(0,i.jsxs)(D.Select,{value:a,onValueChange:e=>n(e),children:[(0,i.jsx)(D.SelectTrigger,{id:"map-size",children:(0,i.jsx)(D.SelectValue,{placeholder:"Select map size"})}),(0,i.jsx)(D.SelectContent,{children:Object.entries(tB).map(([e,t])=>(0,i.jsx)(D.SelectItem,{value:e,children:t.label},e))})]})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(tL,{id:"fill-map",checked:l,onCheckedChange:e=>s(e)}),(0,i.jsx)(e_.Label,{htmlFor:"fill-map",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Fill map with base tiles"})]}),l&&(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(e_.Label,{className:"text-sm font-medium",children:"Select Base Tile Template"}),(0,i.jsx)("div",{className:"text-xs text-muted-foreground mb-2",children:"Choose a tile to fill the map with. The bottom level (level 0) will be filled with the selected tile."}),(0,i.jsx)("div",{className:"grid grid-cols-3 gap-2 p-3 bg-muted/30 border border-dashed border-muted-foreground/30 rounded-lg",children:u.map(e=>(0,i.jsxs)("div",{onClick:()=>d(e),className:(0,ew.cn)("flex flex-col items-center gap-1 p-1 rounded-xl border-2 transition-all cursor-pointer group hover:bg-muted/30",o?.tile_id===e.tile_id?"border-primary bg-primary/5":"border-transparent bg-muted/10"),children:[(0,i.jsx)("div",{className:"w-20 h-20",children:(0,i.jsx)(tO,{obj:m(e.obj_path),mtl:m(e.mtl_path)})}),(0,i.jsx)("div",{className:"text-xs text-muted-foreground text-center line-clamp-2 px-1",children:e.name})]},e.tile_id))})]})]}),(0,i.jsxs)(tc,{children:[(0,i.jsx)(L.Button,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),(0,i.jsxs)(L.Button,{onClick:p,className:"font-bold",children:[(0,i.jsx)(tx,{size:16,className:"mr-2"}),"Create New Map"]})]})]})})}let tU=(0,tn.default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),tW=(0,tn.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),tG=(0,tn.default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);function tJ({open:e,onOpenChange:t,onSave:r,onDiscard:a}){return(0,i.jsx)(eq,{open:e,onOpenChange:t,children:(0,i.jsxs)(ti,{className:"sm:max-w-[420px]",children:[(0,i.jsxs)(to,{children:[(0,i.jsxs)(td,{className:"flex items-center gap-2",children:[(0,i.jsx)(tU,{className:"h-5 w-5 text-amber-500"}),"Unsaved Changes"]}),(0,i.jsx)(tu,{children:"You have unsaved progress. If you leave now, your recent changes will be lost forever."})]}),(0,i.jsxs)(tc,{children:[(0,i.jsxs)(L.Button,{variant:"ghost",onClick:()=>t(!1),children:[(0,i.jsx)(tG,{className:"h-4 w-4 mr-2"}),"Go Back"]}),(0,i.jsxs)(L.Button,{variant:"destructive",onClick:()=>{a(),t(!1)},children:[(0,i.jsx)(tW,{className:"h-4 w-4 mr-2"}),"Discard"]}),(0,i.jsxs)(L.Button,{onClick:()=>{r(),t(!1)},className:"gap-2",children:[(0,i.jsx)(tf,{className:"h-4 w-4"}),"Save Changes"]})]})]})})}function tY(e,t){return{q:e,r:t-(e-(1&e))/2}}let tX="PLAINS",tQ="FOREST",t0="MOUNTAIN",t1="WATER",t2="ROAD",t8={[tX]:{movementCost:1,defenseBonus:0,passable:!0,name:"Plains",color:"#90EE90"},[tQ]:{movementCost:2,defenseBonus:1,passable:!0,name:"Forest",color:"#228B22"},[t0]:{movementCost:3,defenseBonus:2,passable:!0,name:"Mountain",color:"#8B4513"},[t1]:{movementCost:999,defenseBonus:0,passable:!1,name:"Water",color:"#4169E1"},[t2]:{movementCost:.5,defenseBonus:0,passable:!0,name:"Road",color:"#D2B48C"}};class t6{q;r;terrain;unit=null;city=null;hasRiver=!1;rotation=0;height=0;modelData;constructor(e,t,r=tX){if(this.q=e,this.r=t,this.terrain=r,!t8[r])throw Error(`Invalid terrain type: ${r}`)}distanceTo(e){var t,r;let a,n;return t={q:this.q,r:this.r},r={q:e.q,r:e.r},a=-(t.q+t.r),n=-(r.q+r.r),(Math.abs(t.q-r.q)+Math.abs(t.r-r.r)+Math.abs(a-n))/2}getMovementCost(e=null){let t=t8[this.terrain];if(!t)throw Error(`Unknown terrain type: ${this.terrain}`);return t.movementCost}getDefenseBonus(){let e=t8[this.terrain];if(!e)throw Error(`Unknown terrain type: ${this.terrain}`);return e.defenseBonus}getTerrainName(){let e=t8[this.terrain];return e?e.name:"Unknown"}getTerrainColor(){let e=t8[this.terrain];return e?e.color:"#FFFFFF"}}class t4{width;height;hexes;constructor(e,t){if(void 0===e||void 0===t||null===e||null===t||e<=0||t<=0||!Number.isInteger(e)||!Number.isInteger(t))throw Error(`Invalid map dimensions: ${e}x${t}. Dimensions must be positive integers.`);if(e*t>1e6)throw Error(`Map too large: ${e}x${t}. Maximum size is 1000x1000.`);this.width=e,this.height=t,this.hexes=new globalThis.Map}getKey(e,t){return`${e},${t}`}initializeTerrain(){for(let e=0;e<this.height;e++)for(let t=0;t<this.width;t++){let r=t,a=e-(t-(1&t))/2;if(this.isValidCoordinate(r,a)){let e=this.getKey(r,a);this.hexes.set(e,[new t6(r,a,tX)])}}}isValidCoordinate(e,t){return!(e<0)&&!(e>=this.width)&&t>=-this.width&&t<this.height+this.width}getHex(e,t,r){if(!this.isValidCoordinate(e,t))return null;let a=this.getKey(e,t),n=this.hexes.get(a);return n&&0!==n.length?void 0!==r?n.find(e=>e.height===r)||null:n[n.length-1]:null}getHexStack(e,t){if(!this.isValidCoordinate(e,t))return[];let r=this.getKey(e,t);return this.hexes.get(r)||[]}setHex(e,t,r){if(r.q!==e||r.r!==t)throw Error(`Hex coordinates (${r.q}, ${r.r}) do not match position (${e}, ${t})`);if(!this.isValidCoordinate(e,t))throw Error(`Invalid coordinates: (${e}, ${t})`);let a=this.getKey(e,t),n=this.hexes.get(a);n||(n=[],this.hexes.set(a,n));let l=n.findIndex(e=>e.height===r.height);-1!==l?n[l]=r:(n.push(r),n.sort((e,t)=>e.height-t.height))}setTerrain(e,t,r){let a=this.getHex(e,t);a&&(a.terrain=r)}removeHex(e,t,r){if(!this.isValidCoordinate(e,t))return;let a=this.getKey(e,t),n=this.hexes.get(a);if(n&&0!==n.length){if(void 0!==r){let e=n.findIndex(e=>e.height===r);-1!==e&&n.splice(e,1)}else n.pop();0===n.length&&this.hexes.delete(a)}}hasHex(e,t,r){if(!this.isValidCoordinate(e,t))return!1;let a=this.getKey(e,t),n=this.hexes.get(a);return!!n&&0!==n.length&&(void 0===r||n.some(e=>e.height===r))}getNextHeight(e,t){let r=this.getHexStack(e,t);return 0===r.length?0:Math.min(4,Math.max(...r.map(e=>e.height))+1)}getNeighborCoordinates(e,t){return[{q:1,r:0},{q:1,r:-1},{q:0,r:-1},{q:-1,r:0},{q:-1,r:1},{q:0,r:1}].map(r=>({q:e+r.q,r:t+r.r})).filter(e=>this.isValidCoordinate(e.q,e.r))}}class t3{static CURRENT_VERSION="2.0";static FORMAT_ID="warlords-map";static serialize(e,t,r={}){let a=Date.now(),n={};for(let[t,r]of e.hexes.entries())r.length>0&&(n[t]=r.map(e=>{let t={q:e.q,r:e.r,terrain:e.terrain,height:e.height??0};return e.rotation&&0!==e.rotation&&(t.rotation=e.rotation),e.modelData&&(t.modelData={obj:e.modelData.obj,mtl:e.modelData.mtl,name:e.modelData.name}),e.hasRiver&&(t.hasRiver=!0),t}));let l=[];if(r.includeBuildings&&r.buildingData)for(let[e,t]of r.buildingData.entries()){let[r,a]=e.split("_"),[n,s]=r.split(",").map(Number),i=a?Number(a):void 0;l.push({q:n,r:s,height:i,modelData:{obj:t.obj,mtl:t.mtl,name:t.name}})}return JSON.stringify({version:this.CURRENT_VERSION,format:this.FORMAT_ID,metadata:{name:r.name,description:r.description,createdAt:a,modifiedAt:a,mapSize:t},map:{width:e.width,height:e.height},hexes:n,...l.length>0&&{buildings:l}},null,2)}static deserialize(e){let t,r=JSON.parse(e);if(r.format!==this.FORMAT_ID)throw Error(`Invalid map format: expected ${this.FORMAT_ID}, got ${r.format}`);let a="1.0"===r.version;a?console.warn(`Map version 1.0 detected. Migrating to version ${this.CURRENT_VERSION}...`):r.version!==this.CURRENT_VERSION&&console.warn(`Map version mismatch: file version ${r.version}, current version ${this.CURRENT_VERSION}. Attempting to load anyway...`);let n=new t4(r.map.width,r.map.height);if(a)for(let[e,t]of Object.entries(r.hexes)){let[r,a]=e.split(",").map(Number);for(let e of t){let{q:t,r}=tY(e.x,e.y),a=new t6(t,r,e.terrain);a.height=e.height??0,a.rotation=e.rotation??0,e.modelData&&(a.modelData={obj:e.modelData.obj,mtl:e.modelData.mtl,name:e.modelData.name}),e.hasRiver&&(a.hasRiver=!0),n.setHex(t,r,a)}}else for(let[e,t]of Object.entries(r.hexes)){let[r,a]=e.split(",").map(Number);for(let e of t){let t=new t6(e.q,e.r,e.terrain);t.height=e.height??0,t.rotation=e.rotation??0,e.modelData&&(t.modelData={obj:e.modelData.obj,mtl:e.modelData.mtl,name:e.modelData.name}),e.hasRiver&&(t.hasRiver=!0),n.setHex(r,a,t)}}return r.buildings&&(t=a?(r.buildings||[]).map(e=>{let{q:t,r}=tY(e.x,e.y);return{q:t,r,height:e.height,modelData:e.modelData}}):r.buildings),{map:n,mapSize:r.metadata.mapSize,buildings:t,metadata:r.metadata}}static estimateSize(e){let t=0;for(let r of e.hexes.values())t+=r.length;return 200*t+500}static validate(e){let t=[];return e&&"object"==typeof e?(e.format!==this.FORMAT_ID&&t.push(`Invalid format: expected ${this.FORMAT_ID}`),e.version||t.push("Missing version field"),e.map?(("number"!=typeof e.map.width||e.map.width<=0)&&t.push("Invalid map width"),("number"!=typeof e.map.height||e.map.height<=0)&&t.push("Invalid map height")):t.push("Missing map field"),e.hexes&&"object"==typeof e.hexes||t.push("Missing or invalid hexes field"),e.metadata?e.metadata.mapSize||t.push("Missing mapSize in metadata"):t.push("Missing metadata field"),{valid:0===t.length,errors:t}):{valid:!1,errors:["Map file is not an object"]}}}let t5={tiny:{label:"Tiny",width:10,height:10},small:{label:"Small",width:25,height:25},medium:{label:"Medium",width:50,height:50},large:{label:"Large",width:75,height:75},"very-large":{label:"Very large",width:100,height:100}},t7=null,t9=null,re=null,rt=Promise.resolve();function rr({obj:e,mtl:t}){let r=(0,c.useRef)(null),[a,n]=(0,c.useState)(!1),l=(0,c.useRef)(`preview_${Date.now()}_${Math.random()}`);return(0,c.useEffect)(()=>{let a=(()=>{if(!t7)try{(t7=new u.WebGLRenderer({alpha:!0,antialias:!0,preserveDrawingBuffer:!0})).setPixelRatio(1),t7.setSize(120,120),t9=new d.Scene;let e=new d.AmbientLight(0xffffff,.8);t9.add(e);let t=new d.HemisphereLight(0xffffff,4473924,1);t9.add(t);let r=new d.DirectionalLight(0xffffff,1.2);r.position.set(5,10,7.5),t9.add(r);let a=new d.DirectionalLight(0xffffff,.6);a.position.set(-5,5,-5),t9.add(a),(re=new d.PerspectiveCamera(45,1,.1,1e3)).position.set(4,4,4),re.lookAt(0,0,0)}catch(e){return console.error("Failed to init shared preview renderer:",e),null}return{renderer:t7,scene:t9,camera:re}})();if(!a||!r.current)return;n(!1);let s=r.current.getContext("2d");s&&s.clearRect(0,0,120,120);let i=!0,{renderer:o,scene:c,camera:h}=a,p=l.current,f=null;return tD.modelLoader.loadModel(`${e}_preview`,m(e),m(t)).then(e=>{if(!i)return;let t=e.clone(),a=new d.Box3().setFromObject(t),l=a.getCenter(new d.Vector3),s=a.getSize(new d.Vector3),u=3.8/(Math.max(s.x,s.y,s.z)||1);t.scale.set(u,u,u);let m=l.clone().multiplyScalar(u);t.position.sub(m),t.rotation.y=Math.PI/2,rt=rt.then(()=>new Promise(e=>{if(!i)return void e();let a=c.getObjectByName(p);a&&c.remove(a),(f=new d.Group).name=p,f.add(t),c.add(f),((e,t=3e3)=>{let r=[];return(e.traverse(e=>{if(e instanceof d.Mesh){let t=e.material;(Array.isArray(t)?t:[t]).forEach(e=>{(e instanceof d.MeshStandardMaterial||e instanceof d.MeshPhongMaterial||e instanceof d.MeshLambertMaterial)&&(e.map&&!r.includes(e.map)&&r.push(e.map),e.normalMap&&!r.includes(e.normalMap)&&r.push(e.normalMap),e.aoMap&&!r.includes(e.aoMap)&&r.push(e.aoMap),e.emissiveMap&&!r.includes(e.emissiveMap)&&r.push(e.emissiveMap),e instanceof d.MeshStandardMaterial&&(e.roughnessMap&&!r.includes(e.roughnessMap)&&r.push(e.roughnessMap),e.metalnessMap&&!r.includes(e.metalnessMap)&&r.push(e.metalnessMap)))})}}),0===r.length)?new Promise(e=>{requestAnimationFrame(()=>e())}):Promise.all(r.map(e=>new Promise(r=>{if(!e.image){let a=setInterval(()=>{e.image&&(clearInterval(a),clearTimeout(n),r())},50),n=setTimeout(()=>{clearInterval(a),r()},t);return}let a=e.image;if(a instanceof HTMLCanvasElement||a instanceof ImageBitmap||a instanceof VideoFrame)return void r();if(a instanceof HTMLImageElement){if(a.complete&&a.naturalWidth>0)return void r();let e=!1,n=setTimeout(()=>{e||(e=!0,r())},t),l=a.onload,s=a.onerror;a.onload=()=>{e||(e=!0,clearTimeout(n),l&&l.call(a,new Event("load")),r())},a.onerror=()=>{e||(e=!0,clearTimeout(n),s&&s.call(a,new ErrorEvent("error")),r())}}else r()}))).then(()=>new Promise(e=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{e()})})}))})(t,3e3).then(()=>{if(!i||!f)return void e();o.setClearColor(0,0),o.render(c,h);let t=r.current?.getContext("2d");t&&r.current&&(t.clearRect(0,0,120,120),t.drawImage(o.domElement,0,0,120,120,0,0,120,120),i&&n(!0)),f&&(c.remove(f),f=null),e()}).catch(()=>{if(!i||!f)return void e();o.setClearColor(0,0),o.render(c,h);let t=r.current?.getContext("2d");t&&r.current&&(t.clearRect(0,0,120,120),t.drawImage(o.domElement,0,0,120,120,0,0,120,120),i&&n(!0)),f&&(c.remove(f),f=null),e()})}))}).catch(e=>console.error("Preview load error:",e)),()=>{i=!1,rt=rt.then(()=>{let e=c.getObjectByName(p);e&&c.remove(e)})}},[e,t]),(0,i.jsxs)("div",{className:"relative w-full h-full overflow-hidden flex items-center justify-center",children:[!a&&(0,i.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,i.jsx)(H,{className:"animate-spin text-muted-foreground/30",size:24})}),(0,i.jsx)("canvas",{ref:r,width:120,height:120,className:(0,ew.cn)("w-full h-full pointer-events-none transition-opacity duration-300",a?"opacity-100":"opacity-0")})]})}function ra(){let t,r=(0,c.useRef)(null),a=(0,c.useRef)(null),n=(0,c.useRef)(null),l=(0,c.useRef)(null),s=(0,c.useRef)(null),h=(0,c.useRef)(null),p=(0,c.useRef)(new Map),g=(0,c.useRef)(new Map),b=(0,c.useRef)(null),y=(0,c.useRef)(new Map),w=(0,c.useRef)(null),N=(0,c.useRef)(null),S=(0,c.useRef)(1),V=(0,c.useRef)(null),C=(0,c.useRef)([]),Z=(0,c.useRef)(-1),F=(0,c.useRef)(!1),[P,I]=(0,c.useState)(!0),[z,q]=(0,c.useState)("Initializing..."),[O,T]=(0,c.useState)("tiny"),[$,B]=(0,c.useState)(tX),[K,U]=(0,c.useState)("terrain"),[W,G]=(0,c.useState)([]);W.length>0&&W[0];let[J,Y]=(0,c.useState)(0),[X,Q]=(0,c.useState)(null),ee=(0,c.useRef)(!1),et=(0,c.useRef)(!1),er=(0,c.useRef)(!1),ea=(0,c.useRef)(null),en=(0,c.useRef)(!1),el=(0,c.useRef)({x:0,y:0}),ei=(0,c.useRef)(null),eo=(0,c.useRef)(null),ed=(0,c.useRef)(150),eu=(0,c.useRef)(Math.PI/4),em=(0,c.useRef)(Math.PI/4),eh=(0,c.useRef)(new d.Vector3(0,0,0)),[ep,ef]=(0,c.useState)([]),[eg,ex]=(0,c.useState)(""),[eb,ev]=(0,c.useState)(""),[ey,ej]=(0,c.useState)(!1),[eN,eE]=(0,c.useState)(!1),[eS,eH]=(0,c.useState)(!1),[eV,eF]=(0,c.useState)(null),[ek,eL]=(0,c.useState)(!1),[eD,eP]=(0,c.useState)("tiny"),[eI,ez]=(0,c.useState)(""),[eO,eT]=(0,c.useState)("plains"),[e$,eB]=(0,c.useState)(!1),[eK,eU]=(0,c.useState)(null),[eW,eG]=(0,c.useState)(null),[eJ,eY]=(0,c.useState)(""),[eX,eQ]=(0,c.useState)(""),[e0,e1]=(0,c.useState)(!1),[e2,e8]=(0,c.useState)(!1),[e6,e4]=(0,c.useState)("http://localhost:1234"),[e3,e5]=(0,c.useState)([]),[e7,e9]=(0,c.useState)(""),[te,tt]=(0,c.useState)(!1);(0,c.useEffect)(()=>{(async()=>{try{let t=[];try{console.log("Trying static import..."),console.log("Static import result:",t$),t=t$?.tiles||t$||[],console.log("Static import tiles:",t.length)}catch(e){console.error("Static import failed:",e)}if(0===t.length)try{console.log("Trying fetch approach...");let e=await fetch("/Medieval-Hexagon-Map-Editor/lib/llm/tile-registry.json");if(e.ok){let r=await e.json();console.log("Fetch result:",r),t=r?.tiles||r||[],console.log("Fetch tiles:",t.length)}else console.error("Fetch failed with status:",e.status)}catch(e){console.error("Fetch approach failed:",e)}if(0===t.length)try{console.log("Trying dynamic import...");let r=await e.A(99703);console.log("Dynamic import result:",r),t=r?.tiles||r?.default?.tiles||r?.default||[],console.log("Dynamic import tiles:",t.length)}catch(e){console.error("Dynamic import failed:",e)}if(console.log("Final loaded tile registry:",t.length,"tiles"),0===t.length)return void console.error("All approaches failed! Tile registry is empty!");let r={};t.forEach(e=>{r[e.category]||(r[e.category]={name:e.category,folders:{}});let t=e.subcategory||"default";r[e.category].folders[t]||(r[e.category].folders[t]={name:t,models:[]}),r[e.category].folders[t].models.push({name:e.name,obj:e.obj_path,mtl:e.mtl_path,texture:e.texture_path})});let a=Object.values(r).map(e=>({...e,folders:Object.values(e.folders)}));if(console.log("Processed categories:",a.length,a.map(e=>e.name)),console.log("Categories structure:",a.map(e=>({name:e.name,folders:e.folders.map(e=>({name:e.name,modelCount:e.models.length}))}))),ef(a),a.length>0){let e=a.find(e=>"tiles"===e.name);e?(console.log("Setting tiles category, folders:",e.folders.map(e=>e.name)),ex("tiles"),e.folders.length>0&&(ev(e.folders[0].name),console.log("Selected folder:",e.folders[0].name,"with",e.folders[0].models.length,"models"))):(console.log("No tiles category found, using first category:",a[0].name),ex(a[0].name),a[0].folders.length>0&&ev(a[0].folders[0].name))}}catch(e){console.error("Failed to fetch assets:",e)}})()},[]),(0,c.useEffect)(()=>{"tiles"===eg?U("terrain"):U("building")},[eg]);let tr=ep.find(e=>e.name===eg),ta=tr?.folders.find(e=>e.name===eb),tn=ta?.models||[];(0,c.useEffect)(()=>{console.log("Asset state debug:",{assetCategoriesLength:ep.length,selectedCategory:eg,selectedFolder:eb,currentCategory:tr?{name:tr.name,foldersCount:tr.folders.length}:null,currentFolder:ta?{name:ta.name,modelsCount:ta.models.length}:null,availableModelsLength:tn.length})},[ep,eg,eb,tr,ta,tn]);let tl=(e,t,r,a)=>(function(e,t,r,a,n=3.5){let l={x:e,y:t+(e-(1&e))/2},s=2/Math.sqrt(3);return[(l.x-r/2)*(1.5*s*n),(l.y-a/2)*(2*n)+l.x%2*n]})(e,t,r??h.current?.width??10,a??h.current?.height??5,3.5),ts=(e,t,r)=>{let a=(e,t,r,a)=>{let n=[];for(let l=0;l<6;l++){let s=Math.PI/180*(60*l+a),i=e+r*Math.cos(s),o=t+r*Math.sin(s);n.push(new d.Vector3(i,0,o))}return n},n=new d.Group;n.name=`__hexGrid_level_${r}`;let l=2/Math.sqrt(3),s=r*(S.current||.7)+.001;for(let i=0;i<t;i++)for(let o=0;o<e;o++){let{q:c,r:u}=tY(o,i);if(h.current&&h.current.isValidCoordinate(c,u)){let[i,o]=tl(c,u,e,t),m=a(i,o,3.5*l,0),h=[];for(let e=0;e<6;e++)h.push(m[e],m[(e+1)%6]);let p=new d.BufferGeometry().setFromPoints(h),f=new d.LineBasicMaterial({color:4473924,transparent:!0,opacity:.3}),g=new d.LineSegments(p,f);g.position.y=s,g.name=`grid_${c}_${u}_level_${r}`,g.renderOrder=-1,n.add(g)}}return n},tp=(e,t)=>{let r=function(e,t,r,a,n=3.5){let l=e/(2/Math.sqrt(3)*1.5*n)+r/2,s=(t-Math.round(l)%2*n)/(2*n)+a/2,i={x:Math.round(l),y:Math.round(s)};return tY(i.x,i.y)}(e,t,h.current?.width??10,h.current?.height??5,3.5);return h.current&&h.current.isValidCoordinate(r.q,r.r)?r:null},tf=async e=>{let[t,r]=tl(e.q,e.r,h.current?.width,h.current?.height);try{let n=e.modelData||X||tn[0];if(n){e.modelData||(e.modelData=n);let l=`terrain_${e.terrain}_${n.name}_${e.q}_${e.r}`,s=tD.modelLoader.getCachedModel(l);if(s||(s=await tD.modelLoader.loadModel(l,m(n.obj),m(n.mtl))),s){let n=s.clone();n.rotation.y=Math.PI/2+(e.rotation||0),n.scale.set(3.5,3.5,3.5);let l=new d.Box3().setFromObject(n),i=l.max.y-l.min.y;1===S.current&&i>0&&(S.current=i);let o=S.current,c=l.min.y,u=(e.height||0)*o;n.position.set(t,u-c,r),n.traverse(e=>{e instanceof d.Mesh&&(e.castShadow=!0,e.receiveShadow=!0)});let m=a.current?.getObjectByName(`__hexGrid_level_${e.height||0}`),h=m?.getObjectByName(`grid_${e.q}_${e.r}_level_${e.height||0}`);if(h){let t=S.current;h.position.y=(e.height||0)*t+.001,h.visible=!0}return n}}}catch(t){console.warn(`Failed to load model for hex ${e.q},${e.r}:`,t)}return null},tx=async(e,t)=>{if(!a.current)return;q("Filling map with base tiles..."),I(!0);let r=t5[e],n=new t4(r.width,r.height),l=tX;"roads"===eb?l=t2:"coast"===eb?l=t1:"forest"===eb?l=tQ:"mountains"===eb&&(l=t0);for(let e=0;e<r.height;e++)for(let a=0;a<r.width;a++){let{q:r,r:s}=tY(a,e),i=new t6(r,s,l);i.height=0,i.modelData=t,n.setHex(r,s,i)}h.current=n,await tS(),G([]),I(!1),tV(),e1(!1),tb("success",`New ${t5[e].label} map created and filled with ${t.name}`)},tb=(e,t)=>{eU({type:e,message:t}),setTimeout(()=>eU(null),6e3)},tv=()=>{h.current?eJ&&eX?ty():ej(!0):tb("error","No map to save")},ty=()=>{if(h.current&&eJ)try{q("Saving map..."),I(!0);let e=new Map;g.current.forEach((t,r)=>{let a=t.userData?.modelData;a&&e.set(r,a)});let t=t3.serialize(h.current,O,{name:eJ,description:"",includeBuildings:e.size>0,buildingData:e.size>0?e:void 0}),r=t3.validate(JSON.parse(t));if(!r.valid)throw Error(`Validation error: ${r.errors.join(", ")}`);let a=new Blob([t],{type:"application/json"}),n=URL.createObjectURL(a),l=document.createElement("a");l.href=n,l.download=eX||`${eJ.replace(/[^a-zA-Z0-9]/g,"_")}_${Date.now()}.json`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(n),I(!1),e1(!1),tb("success",`Map "${eJ}" saved successfully`)}catch(e){console.error("Failed to save map:",e),I(!1),tb("error",`Save error: ${e instanceof Error?e.message:String(e)}`)}},tj=()=>{e0?(eF("new"),eH(!0)):eE(!0)},tw=async()=>{tt(!0);try{let e,t=`${e6}/v1/models`,r=await fetch(t),a=await r.text();try{e=JSON.parse(a)}catch{e={raw:a}}if(!r.ok)return void tb("error",e.error||e.message||`Failed to load models: HTTP ${r.status}`);let n=e.data||e.models||[];e5(n),n.length>0&&!e7&&e9(n[0].id)}catch(e){tb("error",e instanceof Error?e.message:String(e))}finally{tt(!1)}},tM=async()=>{try{let e;if(!eI.trim())return void tb("error","Please enter a generation prompt");eB(!0),q("Generating map via LLM..."),I(!0),eG({stage:"Initializing...",progress:0,thoughts:"",timeElapsed:0});let t=t5[eD],r={width:t.width,height:t.height,prompt:eI.trim(),biome:eO,returnFormat:"serialized",stream:e2};e2&&(r.useLocalModel=!0,r.localUrl=e6,r.model=e7||e3[0]?.id);let n=e2?6e5:3e4,l=new AbortController,s=Date.now(),i=setInterval(()=>{eW&&eG(e=>e?{...e,timeElapsed:Math.floor((Date.now()-s)/1e3)}:null)},1e3),o=setTimeout(()=>l.abort(),n),c=await fetch("/api/llm/generate-map",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r),signal:l.signal}).finally(()=>{clearTimeout(o),clearInterval(i)});if(!c.ok){let e;try{e=await c.json()}catch{let e=await c.text();throw Error(`HTTP ${c.status}: ${e||c.statusText}`)}throw Error(e.error||"Map generation error")}let d=c.headers.get("content-type");if(d?.includes("text/plain")||d?.includes("text/event-stream")){let t=c.body?.getReader(),r=new TextDecoder,a="",n=null;if(t)try{for(;;){let{done:e,value:l}=await t.read();if(e)break;let s=(a+=r.decode(l,{stream:!0})).split("\n");for(let e of(a=s.pop()||"",s))if(e.trim())if(e.includes("Prompt processing progress")){let t=e.match(/(\d+)%/);t&&eG(e=>e?{...e,stage:"Processing prompt...",progress:parseInt(t[1])}:null)}else if(e.includes("Thought for"))e.match(/Thought for (\d+) seconds/)&&eG(e=>e?{...e,stage:"Thinking...",progress:Math.min(e.progress+10,90)}:null);else if(e.startsWith("{")&&e.includes("success"))try{n=JSON.parse(e)}catch(e){console.warn("Failed to parse final JSON:",e)}else eG(t=>t?{...t,thoughts:e.trim()}:null)}}finally{t.releaseLock()}if(!n)throw Error("No final response received from streaming API");e=n}else try{e=await c.json()}catch(t){let e=await c.text();throw Error(`Failed to parse response: ${t instanceof Error?t.message:String(t)}
Response: ${e.substring(0,500)}`)}if(!e.success||!e.mapData)throw Error("Invalid API response format");eL(!1),eG(null),q("Loading map..."),e.mapSize&&e.mapSize!==O&&T(e.mapSize);let u=JSON.stringify(e.mapData),m=t3.validate(e.mapData);if(!m.valid)throw Error(`Validation error: ${m.errors.join(", ")}`);let{map:f,mapSize:x,buildings:b}=t3.deserialize(u);x!==O&&T(x),p.current.forEach(e=>{a.current?.remove(e)}),p.current.clear(),g.current.forEach(e=>{a.current?.remove(e)}),g.current.clear(),h.current=f,q("Building map..."),await tS(),G([]),I(!1),eB(!1),tV(),tb("success",`Map ${t.width}x${t.height} generated successfully`),console.log("Map generated successfully")}catch(t){console.error("Failed to generate map:",t),I(!1),eB(!1),eG(null);let e=t instanceof Error?t.message:String(t);t instanceof Error&&("AbortError"===t.name||t.message.includes("fetch failed"))&&(e=e2?"Generation interrupted due to timeout. Local models may take a long time to generate (5-10 minutes). Try reducing map size or wait longer.":"Generation interrupted due to timeout. Please try again."),tb("error",`Generation error: ${e}`)}},tN=()=>{e0?(eF("load"),eH(!0)):tE()},tE=()=>{let e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=async e=>{let t=e.target.files?.[0];if(t)try{let e;q("Loading map..."),I(!0);let r=await t.text();try{e=JSON.parse(r)}catch(e){throw Error("File is not valid JSON")}let n=t3.validate(e);if(!n.valid)throw Error(`Invalid file format: ${n.errors.join(", ")}`);let{map:l,mapSize:s,buildings:i,metadata:o}=t3.deserialize(r);if(s!==O&&T(s),p.current.forEach(e=>{a.current?.remove(e)}),p.current.clear(),g.current.forEach(e=>{a.current?.remove(e)}),g.current.clear(),h.current=l,await tS(),i&&i.length>0)for(let e of(q(`Loading buildings (${i.length})...`),i))await tk(e.q,e.r,e.modelData);G([]),I(!1);let c=o?.name||t.name.replace(".json","");eY(c),eQ(t.name),e1(!1),tV(),tb("success",`Map "${c}" loaded successfully`),console.log("Map loaded successfully")}catch(e){console.error("Failed to load map:",e),I(!1),tb("error",`Load error: ${e instanceof Error?e.message:String(e)}`)}},e.click()},tS=async()=>{if(!a.current||!h.current)return;F.current||q("Building map..."),p.current.forEach(e=>{a.current?.remove(e)}),p.current.clear(),g.current.forEach(e=>{a.current?.remove(e)}),g.current.clear();let e=[],t=0;h.current.hexes.forEach((r,n)=>{r&&r.length>0&&r.forEach(r=>{t++;let n=(async()=>{let e=await tf(r);e&&a.current&&(a.current.add(e),p.current.set(`${r.q},${r.r}_${r.height}`,e))})();e.push(n)})}),await Promise.all(e),console.log("buildMap completed - hexes created:",t,"meshes in ref:",p.current.size),0===t&&(console.log("Empty map detected, ensuring grid visibility"),a.current.children.forEach(e=>{if(e.name.startsWith("__hexGrid_level_")){let t=parseInt(e.name.split("_")[3]);e.visible=t===J,t===J&&console.log("Made grid visible for level:",t)}}))},tH=async(e,t,r)=>{if(!h.current||!a.current)return;let n=h.current.getHexStack(e,t);for(let l of void 0!==r?n.filter(e=>e.height===r):n){let r=`${e},${t}_${l.height}`,n=p.current.get(r);n&&(a.current.remove(n),p.current.delete(r));let s=l.modelData||X||tn[0];if(s){l.modelData||(l.modelData=s);let n=`terrain_${l.terrain}_${s.name}_${l.q}_${l.r}_${l.height}`,i=tD.modelLoader.getCachedModel(n);if(i){let[n,s]=tl(e,t),o=i.clone();o.rotation.y=Math.PI/2+(l.rotation||0),o.scale.set(3.5,3.5,3.5);let c=new d.Box3().setFromObject(o).min.y,u=S.current||.7,m=l.height*u;o.position.set(n,m-c,s),a.current.add(o),p.current.set(r,o),W.some(r=>r.q===e&&r.r===t)&&G([...W])}else{let e=await tf(l);e&&a.current&&(a.current.add(e),p.current.set(r,e))}}}},tV=()=>{if(h.current){if(F.current)return void console.log("Skipping saveHistoryState during undo/redo");try{let e={map:t3.serialize(h.current,O,{}),timestamp:Date.now()};if(0===C.current.length||-1===Z.current){C.current=[e],Z.current=0,console.log("History initialized, length:",C.current.length,"index:",Z.current);return}if(C.current=C.current.slice(0,Z.current+1),C.current.push(e),C.current.length>50){let e=C.current.length-50;C.current=C.current.slice(e)}Z.current=C.current.length-1,console.log("History saved, length:",C.current.length,"index:",Z.current)}catch(e){console.warn("Failed to save history state:",e)}}},tA=async()=>{if(!h.current||!a.current)return!1;if(console.log("Undo attempt - Index:",Z.current,"History length:",C.current.length),Z.current<=0)return console.log("Undo failed: Already at first state"),!1;Z.current--;let e=C.current[Z.current];if(!e)return console.error("Undo state not found at index:",Z.current,"history length:",C.current.length),!1;console.log("Undo: Loading state at index",Z.current);try{let{map:t}=t3.deserialize(e.map);return h.current=t,console.log("Undo: Map deserialized, hex count:",t.hexes.size),await tS(),G([]),console.log("Undo completed - Index after undo:",Z.current,"History length:",C.current.length,"meshes in scene:",p.current.size),tb("success","Undone"),!0}catch(e){return console.error("Failed to undo:",e),tb("error","Undo error"),!1}},tC=async()=>{if(!h.current||!a.current)return!1;if(console.log("Redo attempt - Index:",Z.current,"History length:",C.current.length),Z.current>=C.current.length-1)return console.log("Redo failed: Already at last state"),!1;F.current=!0;try{Z.current++;let e=C.current[Z.current];if(!e)return console.error("Redo state not found at index:",Z.current,"history length:",C.current.length),F.current=!1,!1;console.log("Redo: Loading state at index",Z.current);let{map:t}=t3.deserialize(e.map);return h.current=t,console.log("Redo: Map deserialized, hex count:",t.hexes.size),await tS(),G([]),console.log("Redo completed - Index after redo:",Z.current,"History length:",C.current.length,"meshes in scene:",p.current.size),tb("success","Redone"),!0}catch(e){return console.error("Failed to redo:",e),tb("error","Redo error"),!1}finally{F.current=!1}},tR=async(e,t)=>{if(!h.current)return!1;tV();let r=V.current;if(!r)try{let e=localStorage.getItem("mapEditor_clipboard");e&&(V.current=r=JSON.parse(e))}catch(e){console.warn("Failed to load clipboard from localStorage:",e)}if(!r)return tb("error","  "),!1;let a=r.hexes||(r.hex?[r.hex]:[]);if(0===a.length)return tb("error","  "),!1;let n=a[0],l=e-n.q,s=t-n.r,i=0,o=[];for(let e of a){let t=e.q+l,a=e.r+s;if(!h.current.isValidCoordinate(t,a))continue;let n=J+(e.height-r.globalLevel);if(n<0&&(n=0),n>4)continue;if(h.current.hasHex(t,a,n)){let e=J;for(;e<=4&&h.current.hasHex(t,a,e);)e++;if(e>4)continue;n=e}let c=new t6(t,a,e.terrain);c.height=n,c.rotation=e.rotation||0,c.modelData=e.modelData,c.hasRiver=e.hasRiver||!1,h.current.setHex(t,a,c),await tH(t,a,n),i++,o.push({q:t,r:a})}return 0===i?(tb("error","   "),!1):(G(o),e1(!0),tV(),tb("success",` : ${i}`),!0)},tZ=async(e,t)=>{if(!a.current||!h.current)return;let r=h.current.getHexStack(e,t),n=r.length>0?r[r.length-1]:null;if(!n)return;let l=`${e},${t}_${n.height}`,s=p.current.get(l);if(s&&(a.current.remove(s),p.current.delete(l)),h.current.removeHex(e,t,n.height),!h.current.hasHex(e,t,n.height)){let r=a.current.getObjectByName(`__hexGrid_level_${n.height}`),l=r?.getObjectByName(`grid_${e}_${t}_level_${n.height}`);l&&(l.visible=!0)}let i=g.current.get(l);i&&(a.current.remove(i),g.current.delete(l)),e1(!0)},t_=async(e,t,r,n)=>{if(!h.current||!a.current)return!1;tV();let l=h.current.getHexStack(e,t);if(0===l.length)return!1;let s=l[l.length-1],i=s.height;if(!h.current.isValidCoordinate(r,n))return!1;let o=i;if(h.current.hasHex(r,n,o)){let e=o;for(;e<=4&&h.current.hasHex(r,n,e);)e++;if(e>4)return tb("error","    "),!1;o=e}let c=new t6(r,n,s.terrain);return c.height=o,c.rotation=s.rotation,c.modelData=s.modelData,c.hasRiver=s.hasRiver,h.current.setHex(r,n,c),await tH(r,n,o),e1(!0),tV(),requestAnimationFrame(()=>{requestAnimationFrame(()=>{G([{q:r,r:n}])})}),tb("success"," "),!0},tF=async(e,t,r,n)=>{if(!h.current||!a.current)return!1;let l=h.current.getHexStack(e,t);if(0===l.length)return!1;let s=l[l.length-1],i=s.height;if(!h.current.isValidCoordinate(r,n)||h.current.hasHex(r,n,i))return!1;let o=new t6(r,n,s.terrain);return o.height=i,o.rotation=s.rotation,o.modelData=s.modelData,await tZ(e,t),h.current.setHex(r,n,o),await tH(r,n,i),e1(!0),requestAnimationFrame(()=>{requestAnimationFrame(()=>{G([{q:r,r:n}])})}),!0},tk=async(e,t,r)=>{if(!a.current)return;let n=`${e},${t}`,[l,s]=tl(e,t,h.current?.width,h.current?.height),i=g.current.get(n);i&&a.current.remove(i);try{let i=`building_${r.name}_${e}_${t}`,o=await tD.modelLoader.loadModel(i,m(r.obj),m(r.mtl));o.position.set(l,0,s),o.rotation.y=Math.PI/2,o.scale.set(3.5,3.5,3.5),o.userData={modelData:{obj:m(r.obj),mtl:m(r.mtl),name:r.name}},a.current.add(o),g.current.set(n,o)}catch(e){console.error(`Failed to place building ${r.name}:`,e)}},tL=async()=>{if(r.current)try{let e,t,i=new d.Scene;i.background=new d.Color(1710618),a.current=i;let o=new d.PlaneGeometry(1e3,1e3),c=new d.MeshBasicMaterial({visible:!1}),m=new d.Mesh(o,c);m.rotation.x=-Math.PI/2,m.name="__hitPlane",i.add(m);let p=t5[O];for(let e=0;e<=4;e++){let t=ts(p.width,p.height,e);t.visible=e===J,i.add(t)}let f=2/Math.sqrt(3),g=3.5*f*1.05,x=3.5*f*.95,v=new d.Shape;for(let e=0;e<6;e++){let t=60*e*(Math.PI/180),r=g*Math.cos(t),a=g*Math.sin(t);0===e?v.moveTo(r,a):v.lineTo(r,a)}v.closePath();let y=new d.Path;for(let e=0;e<6;e++){let t=60*e*(Math.PI/180),r=x*Math.cos(t),a=x*Math.sin(t);0===e?y.moveTo(r,a):y.lineTo(r,a)}y.closePath(),v.holes.push(y);let j=new d.ShapeGeometry(v);j.rotateX(-Math.PI/2),j.rotateY(Math.PI/2);let w=new d.MeshBasicMaterial({color:65535,transparent:!0,opacity:.8,side:d.DoubleSide,depthTest:!1,depthWrite:!1}),M=new d.Mesh(j,w);M.name="__selectionHighlight",M.renderOrder=2e3,M.visible=!1,i.add(M),b.current=M;let N=s.current;if(!N)return;let E=N.clientWidth,S=N.clientHeight;n.current=new d.PerspectiveCamera(60,E/S,.1,1e4);let H=new u.WebGLRenderer({canvas:r.current,antialias:!0});H.setSize(E,S),H.setPixelRatio(window.devicePixelRatio),H.shadowMap.enabled=!0,l.current=H,e=new d.AmbientLight(0xffffff,.6),i.add(e),(t=new d.DirectionalLight(0xffffff,.8)).position.set(50,100,50),t.castShadow=!0,t.shadow.mapSize.width=2048,t.shadow.mapSize.height=2048,i.add(t);let V=t5[O];h.current=new t4(V.width,V.height),await tS(),tP(),I(!1)}catch(e){console.error("Init failed:",e),q(`Error: ${e instanceof Error?e.message:String(e)}`)}},tP=()=>{if(!l.current||!a.current||!n.current)return;let e=n.current,t=ed.current,r=eu.current,s=em.current,i=eh.current;e.position.x=i.x+Math.cos(s)*Math.cos(r)*t,e.position.y=i.y+Math.sin(r)*t,e.position.z=i.z+Math.sin(s)*Math.cos(r)*t,e.lookAt(i),l.current.render(a.current,e),w.current=requestAnimationFrame(tP)};(0,c.useEffect)(()=>(tL(),()=>{w.current&&cancelAnimationFrame(w.current)}),[]),(0,c.useEffect)(()=>{if(a.current)for(let e=0;e<=4;e++){let t=a.current.getObjectByName(`__hexGrid_level_${e}`);t&&(t.visible=e===J)}},[J]),(0,c.useEffect)(()=>{let e=async e=>{if(!(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement)){if(W.length>0&&h.current){let t=W[0],r=h.current.getNeighborCoordinates(t.q,t.r),a=h.current.getHexStack(t.q,t.r);if(a.length>0){let n=a[a.length-1].height,l=null;"KeyW"===e.code?l=r.find(e=>e.q===t.q&&e.r===t.r+1)||r.find(e=>e.r>t.r)||null:"KeyS"===e.code?l=r.find(e=>e.q===t.q&&e.r===t.r-1)||r.find(e=>e.r<t.r)||null:"KeyA"===e.code?l=r.find(e=>e.q===t.q+1&&e.r===t.r)||r.find(e=>e.q>t.q)||null:"KeyD"===e.code&&(l=r.find(e=>e.q===t.q-1&&e.r===t.r)||r.find(e=>e.q<t.q)||null),l&&!h.current.hasHex(l.q,l.r,n)&&await tF(t.q,t.r,l.q,l.r)}}else{let t=em.current,r=new d.Vector3(-Math.cos(t),0,-Math.sin(t)),a=new d.Vector3(-Math.sin(t),0,Math.cos(t));"KeyW"===e.code&&eh.current.add(r.multiplyScalar(5)),"KeyS"===e.code&&eh.current.add(r.multiplyScalar(-5)),"KeyA"===e.code&&eh.current.add(a.multiplyScalar(5)),"KeyD"===e.code&&eh.current.add(a.multiplyScalar(-5))}if(W.length>0&&h.current){let t=W[0],r=h.current.getHexStack(t.q,t.r),n=r.length>0?r[r.length-1]:null;if(n){let r=n.height;if("KeyQ"===e.code&&(n.rotation=(n.rotation||0)+Math.PI/3,tH(t.q,t.r,n.height)),"KeyE"===e.code&&(n.rotation=(n.rotation||0)-Math.PI/3,tH(t.q,t.r,n.height)),"KeyR"===e.code){let e=Math.min(4,(n.height||0)+1);if(e!==r&&!h.current.hasHex(t.q,t.r,e)){h.current.removeHex(t.q,t.r,r);let l=`${t.q},${t.r}_${r}`,s=p.current.get(l);s&&a.current&&(a.current.remove(s),p.current.delete(l)),n.height=e,h.current.setHex(t.q,t.r,n),await tH(t.q,t.r,e),requestAnimationFrame(()=>{requestAnimationFrame(()=>{G([t])})})}}if("KeyF"===e.code){let e=Math.max(0,(n.height||0)-1);if(e!==r&&!h.current.hasHex(t.q,t.r,e)){h.current.removeHex(t.q,t.r,r);let l=`${t.q},${t.r}_${r}`,s=p.current.get(l);s&&a.current&&(a.current.remove(s),p.current.delete(l)),n.height=e,h.current.setHex(t.q,t.r,n),await tH(t.q,t.r,e),requestAnimationFrame(()=>{requestAnimationFrame(()=>{G([t])})})}}}}if("Delete"===e.code&&W.length>0){for(let e of(tV(),W))await tZ(e.q,e.r);G([])}if(e.ctrlKey||e.metaKey){if("c"===e.key||"C"===e.key){e.preventDefault(),(()=>{if(!h.current)return;let e=[];if(W.length>0)e=W;else{let t=ei.current;if(!(t&&h.current.hasHex(t.q,t.r)))return tb("error","   .       .");e=[t]}let t=[];for(let r of e){let e=h.current.getHex(r.q,r.r);e&&t.push({q:e.q,r:e.r,terrain:e.terrain,height:e.height,rotation:e.rotation,modelData:e.modelData,hasRiver:e.hasRiver})}if(0===t.length)return tb("error","   ");let r={hexes:t,sourceHeight:t[0].height,globalLevel:J,hex:1===t.length?t[0]:void 0};try{localStorage.setItem("mapEditor_clipboard",JSON.stringify(r))}catch(e){console.warn("Failed to save clipboard to localStorage:",e)}return V.current=r,tb("success",` : ${t.length}`)})();return}if("v"===e.key||"V"===e.key){e.preventDefault();let t=ei.current;t?await tR(t.q,t.r):tb("error","     ");return}if("z"===e.key||"Z"===e.key){e.preventDefault(),e.shiftKey?await tC():await tA();return}if("n"===e.key||"N"===e.key){e.preventDefault(),tj();return}if("o"===e.key||"O"===e.key){e.preventDefault(),tN();return}if("s"===e.key||"S"===e.key){e.preventDefault(),tv();return}if("y"===e.key||"Y"===e.key){e.preventDefault(),await tC();return}}}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[W]),(0,c.useEffect)(()=>{if(!a.current||!h.current)return;let e=new Set(W.map(e=>`${e.q},${e.r}`));y.current.forEach((t,r)=>{e.has(r)||(a.current?.remove(t),y.current.delete(r))}),W.length>0&&h.current&&a.current?W.forEach(e=>{let t=`${e.q},${e.r}`,r=h.current.getHex(e.q,e.r);if(!r)return;let[n,l]=tl(e.q,e.r),s=h.current.getHexStack(e.q,e.r),i=s.length>0?s[s.length-1]:r,o=i?`${e.q},${e.r}_${i.height}`:`${e.q},${e.r}`,c=y.current.get(t);c||(c=(()=>{let e=2/Math.sqrt(3),t=3.5*e*1.05,r=3.5*e*.95,a=new d.Shape;for(let e=0;e<6;e++){let r=60*e*(Math.PI/180),n=t*Math.cos(r),l=t*Math.sin(r);0===e?a.moveTo(n,l):a.lineTo(n,l)}a.closePath();let n=new d.Path;for(let e=0;e<6;e++){let t=60*e*(Math.PI/180),a=r*Math.cos(t),l=r*Math.sin(t);0===e?n.moveTo(a,l):n.lineTo(a,l)}n.closePath(),a.holes.push(n);let l=new d.ShapeGeometry(a);l.rotateX(-Math.PI/2),l.rotateY(Math.PI/2);let s=new d.MeshBasicMaterial({color:65535,transparent:!0,opacity:.8,side:d.DoubleSide,depthTest:!1,depthWrite:!1}),i=new d.Mesh(l,s);return i.name="__selectionHighlight",i.renderOrder=2e3,i.visible=!1,i})(),a.current.add(c),y.current.set(t,c));let u=()=>{let e=p.current.get(o),t=0;if(e){e.updateMatrixWorld(!0);let r=new d.Box3().setFromObject(e);if(r.isEmpty()){let r=S.current||.7,a=e.position.y;t=(i?.height||0)*r-a+r/2}else t=r.max.y}else{let e=S.current||.7;t=(i&&i.height||0)*e+e/2}c&&(c.position.set(n,t+.1,l),c.rotation.y=Math.PI/2+(i?.rotation||0),c.visible=!0,c.updateMatrixWorld(!0))};requestAnimationFrame(()=>{requestAnimationFrame(u)})}):y.current.forEach(e=>{e.visible=!1}),b.current&&(b.current.visible=!1)},[W]),(0,c.useEffect)(()=>{let e=()=>{if(n.current&&l.current&&s.current){let e=s.current.clientWidth,t=s.current.clientHeight;n.current.aspect=e/t,n.current.updateProjectionMatrix(),l.current.setSize(e,t)}};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let tI=e=>((e,t)=>{if(!n.current||!h.current||!r.current)return null;let l=r.current.getBoundingClientRect(),s=new d.Vector2((e-l.left)/l.width*2-1,-(2*((t-l.top)/l.height))+1),i=new d.Raycaster;i.setFromCamera(s,n.current);let o=i.intersectObjects(Array.from(p.current.values()),!0);if(o.length>0){let e=o[0].object,t=null;for(;e&&!t;){let r=Array.from(p.current.entries()).find(([t,r])=>r===e);r?t=r[0]:e=e.parent}if(t){let[e,r]=t.split("_")[0].split(",").map(Number);return{q:e,r}}}let c=i.intersectObjects(a.current?.children.filter(e=>"__hitPlane"===e.name)||[]);if(c.length>0){let e=c[0].point,t=tp(e.x,e.z);if(t)return t}return null})(e.clientX,e.clientY),tz=async e=>{if(!h.current)return;if(ee.current&&ea.current){let t=tI(e);if(t){let e=h.current.getHexStack(ea.current.q,ea.current.r);if(e.length>0&&(t.q!==ea.current.q||t.r!==ea.current.r))if(en.current)await t_(ea.current.q,ea.current.r,t.q,t.r);else{let r=e[e.length-1].height;h.current.hasHex(t.q,t.r,r)||await tF(ea.current.q,ea.current.r,t.q,t.r)}}ee.current=!1,en.current=!1,ea.current=null;return}let t=tI(e);t&&h.current.hasHex(t.q,t.r)?e.ctrlKey||e.metaKey?G(e=>e.some(e=>e.q===t.q&&e.r===t.r)?e.filter(e=>e.q!==t.q||e.r!==t.r):[...e,t]):G([t]):e.ctrlKey||e.metaKey||G([])};return(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 flex h-screen w-full bg-background overflow-hidden text-foreground selection:bg-primary/20",children:[(0,i.jsxs)("aside",{className:"jsx-8ce17cf8c7e169b2 w-80 border-r border-border bg-card/50 backdrop-blur-md flex flex-col z-20",children:[(0,i.jsx)("div",{className:"jsx-8ce17cf8c7e169b2 p-6 border-b border-border bg-card/80",children:(0,i.jsx)("h1",{className:"jsx-8ce17cf8c7e169b2 text-xl font-bold tracking-tight flex flex-col items-center justify-center gap-2",children:(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 flex items-center justify-center gap-3",children:[(0,i.jsx)("div",{className:"jsx-8ce17cf8c7e169b2 w-6 h-6 overflow-visible flex items-center justify-center",children:(0,i.jsx)("div",{style:{transform:"scale(4)"},className:"jsx-8ce17cf8c7e169b2",children:(0,i.jsx)(rr,{obj:m("/assets/terrain/buildings/blue/building_home_B_blue.obj"),mtl:m("/assets/terrain/buildings/blue/building_home_B_blue.mtl")})})}),(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 flex flex-col items-start ml-[20px]",children:[(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2",children:"Medieval Hexagon Map"}),(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2",children:"Editor"})]})]})})}),(0,i.jsx)(eR.ScrollArea,{className:"flex-1",children:(0,i.jsx)("div",{className:"jsx-8ce17cf8c7e169b2 p-4 flex flex-col h-full gap-6 min-h-0",children:(0,i.jsxs)("section",{className:"jsx-8ce17cf8c7e169b2 space-y-4",children:[(0,i.jsx)(e_.Label,{className:"text-xs font-bold uppercase tracking-wider text-muted-foreground",children:"Assets"}),(0,i.jsxs)(D.Select,{value:eg,onValueChange:ex,children:[(0,i.jsx)(D.SelectTrigger,{children:(0,i.jsx)(D.SelectValue,{})}),(0,i.jsx)(D.SelectContent,{children:ep.map(e=>(0,i.jsx)(D.SelectItem,{value:e.name,children:e.name},e.name))})]}),(0,i.jsxs)(D.Select,{value:eb,onValueChange:ev,children:[(0,i.jsx)(D.SelectTrigger,{children:(0,i.jsx)(D.SelectValue,{})}),(0,i.jsx)(D.SelectContent,{children:tr?.folders.map(e=>(0,i.jsx)(D.SelectItem,{value:e.name,children:e.name},e.name))})]}),(0,i.jsx)("div",{className:"jsx-8ce17cf8c7e169b2 grid grid-cols-2 gap-2 h-full content-start",children:tn.map((e,t)=>(0,i.jsxs)("div",{draggable:!0,onDragStart:()=>{N.current=e,Q(e)},onClick:()=>Q(e),className:"jsx-8ce17cf8c7e169b2 "+((0,ew.cn)("p-1 rounded-xl border-2 transition-all cursor-pointer group hover:bg-muted/30",X?.name===e.name?"border-primary bg-primary/5":"border-transparent bg-muted/10")||""),children:[(0,i.jsx)("div",{className:"jsx-8ce17cf8c7e169b2 aspect-square w-full",children:(0,i.jsx)(rr,{obj:m(e.obj),mtl:m(e.mtl)})}),(0,i.jsx)("p",{className:"jsx-8ce17cf8c7e169b2 text-[11px] font-bold text-center mt-1 truncate px-1 py-1 uppercase tracking-tight",children:e.name})]},t))})]})})}),(0,i.jsx)("div",{className:"jsx-8ce17cf8c7e169b2 p-4 border-t border-border flex flex-col gap-2",children:!1}),(0,i.jsx)(tg,{open:ey,onOpenChange:ej,onSave:e=>{if(h.current)try{ej(!1),q("Saving map..."),I(!0);let t=new Map;g.current.forEach((e,r)=>{let a=e.userData?.modelData;a&&t.set(r,a)});let r=t3.serialize(h.current,O,{name:e.name,description:e.description,includeBuildings:t.size>0,buildingData:t.size>0?t:void 0}),a=t3.validate(JSON.parse(r));if(!a.valid)throw Error(`Validation error: ${a.errors.join(", ")}`);let n=new Blob([r],{type:"application/json"}),l=URL.createObjectURL(n),s=document.createElement("a");s.href=l,s.download=e.filename,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(l),I(!1),eY(e.name),eQ(e.filename),e1(!1),tb("success",`Map "${e.name}" saved successfully`),console.log("Map saved successfully:",e)}catch(e){console.error("Failed to save map:",e),I(!1),tb("error",`Save error: ${e instanceof Error?e.message:String(e)}`)}}}),(0,i.jsx)(tK,{open:eN,onOpenChange:eE,onConfirm:(e,t,r)=>{h.current&&h.current.hexes.clear(),g.current.clear(),G([]),C.current=[],Z.current=-1,eY(""),eQ(""),e1(!1),e!==O&&T(e),t?r?tx(e,{obj:m(r.obj_path),mtl:m(r.mtl_path),name:r.name}):X?tx(e,X):(tb("error","Please select a tile to use as template for filling"),a.current&&l.current&&n.current&&l.current.render(a.current,n.current),tb("success",`New ${t5[e].label} map created`)):(a.current&&l.current&&n.current&&l.current.render(a.current,n.current),tb("success",`New ${t5[e].label} map created`))}}),(0,i.jsx)(tJ,{open:eS,onOpenChange:eH,onSave:()=>{tv()},onDiscard:()=>{"new"===eV?eE(!0):"load"===eV&&tE(),eF(null)}}),(0,i.jsx)(eq,{open:ek,onOpenChange:eL,children:(0,i.jsxs)(ti,{children:[(0,i.jsxs)(to,{children:[(0,i.jsxs)(td,{className:"flex items-center gap-2",children:[(0,i.jsx)(_,{size:20,className:"text-cyan-400"}),"Generate Map (AI)"]}),(0,i.jsx)(tu,{children:"Describe the map you want to generate"})]}),(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 py-4 space-y-4",children:[(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 space-y-2",children:[(0,i.jsx)(e_.Label,{children:"LLM Provider"}),(0,i.jsx)(eC.Tabs,{value:e2?"local":"gemini",onValueChange:e=>e8("local"===e),children:(0,i.jsxs)(eC.TabsList,{className:"grid w-full grid-cols-2",children:[(0,i.jsx)(eC.TabsTrigger,{value:"gemini",children:"Gemini API"}),(0,i.jsx)(eC.TabsTrigger,{value:"local",children:"Local Server"})]})})]}),e2&&(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 space-y-3 p-4 bg-purple-500/10 border border-purple-500/20 rounded-lg",children:[(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 space-y-2",children:[(0,i.jsx)(e_.Label,{htmlFor:"local-model-url",children:"Local Server URL"}),(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 flex gap-2",children:[(0,i.jsx)(tm.Input,{id:"local-model-url",value:e6,onChange:e=>e4(e.target.value),placeholder:"http://localhost:1234",className:"flex-1"}),(0,i.jsx)(L.Button,{onClick:tw,disabled:te||e$,variant:"outline",size:"sm",children:te?"...":"Load"})]})]}),e3.length>0&&(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 space-y-2",children:[(0,i.jsx)(e_.Label,{htmlFor:"local-model-select",children:"Model"}),(0,i.jsxs)(D.Select,{value:e7,onValueChange:e9,children:[(0,i.jsx)(D.SelectTrigger,{id:"local-model-select",children:(0,i.jsx)(D.SelectValue,{placeholder:"Select model"})}),(0,i.jsx)(D.SelectContent,{children:e3.map(e=>(0,i.jsx)(D.SelectItem,{value:e.id,children:e.id},e.id))})]})]}),0===e3.length&&!te&&(0,i.jsx)("p",{className:"jsx-8ce17cf8c7e169b2 text-xs text-purple-400",children:'Click "Load" to fetch available models'})]}),(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 space-y-2",children:[(0,i.jsx)(e_.Label,{htmlFor:"generate-prompt",children:"Description"}),(0,i.jsx)(th,{id:"generate-prompt",value:eI,onChange:e=>ez(e.target.value),placeholder:"e.g., A peaceful village with a river flowing through it, surrounded by forests",rows:4})]}),(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 space-y-2",children:[(0,i.jsx)(e_.Label,{htmlFor:"generate-size",children:"Map Size"}),(0,i.jsxs)(D.Select,{value:eD,onValueChange:e=>eP(e),children:[(0,i.jsx)(D.SelectTrigger,{id:"generate-size",children:(0,i.jsx)(D.SelectValue,{})}),(0,i.jsx)(D.SelectContent,{children:Object.entries(t5).map(([e,{label:t,width:r,height:a}])=>(0,i.jsxs)(D.SelectItem,{value:e,children:[t," (",r,"",a,")"]},e))})]})]}),(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 space-y-2",children:[(0,i.jsx)(e_.Label,{htmlFor:"generate-biome",children:"Primary Biome"}),(0,i.jsxs)(D.Select,{value:eO,onValueChange:e=>eT(e),children:[(0,i.jsx)(D.SelectTrigger,{id:"generate-biome",children:(0,i.jsx)(D.SelectValue,{})}),(0,i.jsxs)(D.SelectContent,{children:[(0,i.jsx)(D.SelectItem,{value:"plains",children:"Plains"}),(0,i.jsx)(D.SelectItem,{value:"forest",children:"Forest"}),(0,i.jsx)(D.SelectItem,{value:"mountain",children:"Mountain"}),(0,i.jsx)(D.SelectItem,{value:"water",children:"Water"})]})]})]}),e$&&eW?(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 space-y-3 p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:[(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 space-y-2",children:[(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 flex justify-between items-center",children:[(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 text-sm font-medium",children:eW.stage}),(0,i.jsxs)("span",{className:"jsx-8ce17cf8c7e169b2 text-xs text-muted-foreground",children:[eW.timeElapsed,"s elapsed"]})]}),(0,i.jsx)("div",{className:"jsx-8ce17cf8c7e169b2 w-full bg-gray-200 rounded-full h-2",children:(0,i.jsx)("div",{style:{width:`${eW.progress}%`},className:"jsx-8ce17cf8c7e169b2 bg-blue-600 h-2 rounded-full transition-all duration-300"})}),eW.progress>0&&(0,i.jsxs)("span",{className:"jsx-8ce17cf8c7e169b2 text-xs text-blue-400",children:[eW.progress,"%"]})]}),eW.thoughts&&(0,i.jsx)("div",{className:"jsx-8ce17cf8c7e169b2 mt-3 p-3 bg-gray-800/50 rounded border-l-4 border-blue-500",children:(0,i.jsx)("p",{className:"jsx-8ce17cf8c7e169b2 text-xs text-gray-300 font-mono leading-relaxed",children:eW.thoughts})})]}):e$?null:(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 text-sm text-muted-foreground bg-muted/50 p-3 rounded-lg",children:[(0,i.jsx)("p",{className:"jsx-8ce17cf8c7e169b2 font-semibold mb-1",children:"Note:"}),e2?(0,i.jsx)("p",{className:"jsx-8ce17cf8c7e169b2",children:"Local models may take 5-10 minutes to generate a map depending on size. The current map will be replaced."}):(0,i.jsx)("p",{className:"jsx-8ce17cf8c7e169b2",children:"Generation may take 5-10 seconds. The current map will be replaced."})]})]}),(0,i.jsxs)(tc,{children:[(0,i.jsx)(L.Button,{variant:"outline",onClick:()=>eL(!1),disabled:e$,children:"Cancel"}),(0,i.jsx)(L.Button,{onClick:tM,disabled:e$||!eI.trim()||e2&&!e7&&e3.length>0,children:e$?"Generating...":"Generate"})]})]})})]}),(0,i.jsxs)("main",{ref:s,className:"jsx-8ce17cf8c7e169b2 flex-1 relative flex flex-col overflow-hidden bg-[#050505]",children:[(0,i.jsxs)(es,{children:[(0,i.jsx)(ec,{asChild:!0,children:(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 absolute top-4 left-4 z-30 p-1 bg-card/80 backdrop-blur-xl border border-border/50 rounded-full flex items-center gap-3 px-4 py-2 shadow-2xl cursor-pointer hover:bg-card/90 transition-colors",children:[(0,i.jsx)(k,{size:18,className:"text-primary",weight:"bold"}),(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 text-xs font-bold tracking-tight uppercase text-primary",children:"File"})]})}),(0,i.jsx)(eM,{align:"start",className:"w-48 bg-card/95 backdrop-blur-xl border border-border/50 shadow-2xl",children:(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 space-y-1",children:[(0,i.jsxs)("div",{onClick:tj,className:"jsx-8ce17cf8c7e169b2 flex items-center justify-between px-2 py-2 rounded cursor-pointer hover:bg-primary/10 transition-colors",children:[(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2",children:"New..."}),(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 text-xs text-muted-foreground",children:"Ctrl+N"})]}),(0,i.jsx)(eA,{}),(0,i.jsxs)("div",{onClick:tN,className:"jsx-8ce17cf8c7e169b2 flex items-center justify-between px-2 py-2 rounded cursor-pointer hover:bg-primary/10 transition-colors",children:[(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2",children:"Open..."}),(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 text-xs text-muted-foreground",children:"Ctrl+O"})]}),(0,i.jsxs)("div",{onClick:tv,className:"jsx-8ce17cf8c7e169b2 flex items-center justify-between px-2 py-2 rounded cursor-pointer hover:bg-primary/10 transition-colors",children:[(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2",children:"Save..."}),(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 text-xs text-muted-foreground",children:"Ctrl+S"})]})]})})]}),(0,i.jsx)("div",{className:"jsx-8ce17cf8c7e169b2 absolute top-4 left-1/2 -translate-x-1/2 z-30 p-1 bg-card/80 backdrop-blur-xl border border-border/50 rounded-full flex items-center gap-2 px-4 py-2 shadow-2xl",children:(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 text-xs font-bold tracking-tight uppercase text-primary",children:eJ?`${eJ}${e0?"*":""}`:"Not saved..."})}),X&&(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 absolute top-4 right-4 z-30 p-1 bg-card/80 backdrop-blur-xl border border-border/50 rounded-full flex items-center gap-3 pl-4 pr-2 py-1.5 shadow-2xl overflow-visible",children:[(0,i.jsx)(H,{size:18,className:"text-primary",weight:"bold"}),(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 flex flex-col leading-none",children:[(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 text-[10px] uppercase tracking-widest text-muted-foreground font-bold leading-tight",children:"Placing"}),(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 text-xs font-bold tracking-tight uppercase",children:X.name})]}),(0,i.jsx)("div",{className:"jsx-8ce17cf8c7e169b2 w-8 h-8 overflow-visible ml-1 flex items-center justify-center",children:(0,i.jsx)("div",{style:{transform:"scale(2.5)"},className:"jsx-8ce17cf8c7e169b2",children:(0,i.jsx)(rr,{obj:m(X.obj),mtl:m(X.mtl)})})})]}),(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 absolute left-6 top-1/2 -translate-y-1/2 z-30 flex flex-col items-center gap-2",children:[(0,i.jsx)(L.Button,{variant:"ghost",size:"icon",className:"h-10 w-10 rounded-full bg-card/80 backdrop-blur-xl border border-border/50 hover:bg-primary/20 text-primary transition-all shadow-xl",onClick:()=>Y(e=>Math.min(4,e+1)),disabled:J>=4,children:(0,i.jsx)(j,{size:20,weight:"bold"})}),(0,i.jsx)("div",{className:"jsx-8ce17cf8c7e169b2 p-1 bg-card/80 backdrop-blur-xl border border-border/50 rounded-2xl px-4 py-3 shadow-2xl",children:(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 flex flex-col items-center gap-1",children:[(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 text-[9px] font-bold text-muted-foreground uppercase tracking-widest leading-none",children:"Level"}),(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 text-2xl font-black text-primary tracking-tighter tabular-nums",children:J+1}),(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 text-[8px] font-bold text-muted-foreground uppercase tracking-widest leading-none",children:"of 5"})]})}),(0,i.jsx)(L.Button,{variant:"ghost",size:"icon",className:"h-10 w-10 rounded-full bg-card/80 backdrop-blur-xl border border-border/50 hover:bg-primary/20 text-primary transition-all shadow-xl",onClick:()=>Y(e=>Math.max(0,e-1)),disabled:J<=0,children:(0,i.jsx)(M,{size:20,weight:"bold"})})]}),(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 absolute bottom-24 left-6 z-30 p-1 bg-card/80 backdrop-blur-xl border border-border/50 rounded-full flex items-center gap-3 px-4 py-2 shadow-2xl",children:[(0,i.jsx)(f,{size:18,className:"text-primary",weight:"bold"}),(0,i.jsxs)("span",{className:"jsx-8ce17cf8c7e169b2 text-xs font-bold tracking-tight uppercase",children:["GRID: ",t5[O].width,"",t5[O].height]})]}),W.length>0&&h.current?.getHex(W[0].q,W[0].r)&&(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 absolute bottom-6 left-6 z-30 p-1 bg-card/80 backdrop-blur-xl border border-border/50 rounded-full flex items-center gap-4 pl-6 pr-2 py-3 shadow-2xl pointer-events-auto animate-in fade-in slide-in-from-left-4 duration-300 overflow-visible",children:[(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 flex items-center gap-2",children:[(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 text-[10px] font-bold text-muted-foreground uppercase tracking-widest",children:W.length>1?"Selected":"Hex"}),1===W.length?(0,i.jsxs)("span",{className:"jsx-8ce17cf8c7e169b2 text-sm font-black text-primary tracking-tighter tabular-nums",children:[W[0].q,", ",W[0].r]}):(0,i.jsxs)("span",{className:"jsx-8ce17cf8c7e169b2 text-sm font-black text-primary tracking-tighter tabular-nums",children:[W.length," hexes"]})]}),1===W.length&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eA,{orientation:"vertical",className:"h-5 bg-border/50"}),(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 flex items-center gap-2",children:[(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 text-[10px] font-bold text-muted-foreground uppercase tracking-widest",children:"Level"}),(0,i.jsxs)("span",{className:"jsx-8ce17cf8c7e169b2 text-sm font-black text-primary tracking-tighter tabular-nums",children:[(h.current.getHex(W[0].q,W[0].r)?.height||0)+1,"/5"]})]}),(0,i.jsx)(eA,{orientation:"vertical",className:"h-5 bg-border/50"}),(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 flex items-center gap-2",children:[(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 text-[10px] font-bold text-muted-foreground uppercase tracking-widest",children:"Type"}),(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 text-xs font-bold text-primary tracking-tight uppercase",children:h.current.getHex(W[0].q,W[0].r)?.modelData?.name||h.current.getHex(W[0].q,W[0].r)?.terrain||"Standard"})]}),(t=h.current.getHex(W[0].q,W[0].r),t?.modelData?(0,i.jsx)("div",{className:"jsx-8ce17cf8c7e169b2 w-8 h-8 overflow-visible ml-1 flex items-center justify-center",children:(0,i.jsx)("div",{style:{transform:"scale(2.5)"},className:"jsx-8ce17cf8c7e169b2",children:(0,i.jsx)(rr,{obj:m(t.modelData.obj),mtl:m(t.modelData.mtl)})})}):null)]})]}),(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 absolute bottom-6 left-1/2 -translate-x-1/2 z-30 p-1 bg-card/80 backdrop-blur-xl border border-border/50 rounded-full flex items-center gap-3 px-4 py-2 shadow-2xl transition-all hover:bg-card/95",children:[(0,i.jsx)(A,{size:18,className:"text-primary animate-pulse"}),(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 text-xs font-bold tracking-tight uppercase",children:"3D PERSPECTIVE"}),(0,i.jsx)(eA,{orientation:"vertical",className:"h-4 bg-border/50"}),(0,i.jsxs)(eZ.Tooltip,{children:[(0,i.jsx)(eZ.TooltipTrigger,{asChild:!0,children:(0,i.jsx)(L.Button,{variant:"ghost",size:"icon",className:"h-7 w-7 rounded-full hover:bg-primary/20 text-primary transition-colors",onClick:()=>{ed.current=150,eu.current=Math.PI/4,em.current=Math.PI/4},children:(0,i.jsx)(E,{size:16})})}),(0,i.jsx)(eZ.TooltipContent,{children:"Reset View"})]})]}),(0,i.jsxs)(es,{children:[(0,i.jsx)(ec,{asChild:!0,children:(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 absolute bottom-6 right-6 z-30 p-1 bg-card/80 backdrop-blur-xl border border-border/50 rounded-full flex items-center gap-4 pl-6 pr-6 py-3 shadow-2xl pointer-events-auto cursor-pointer hover:bg-card/90 transition-colors",children:[(0,i.jsx)(R,{size:18,className:"text-primary",weight:"bold"}),(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 text-xs font-bold tracking-tight uppercase text-primary",children:"Controls"})]})}),(0,i.jsx)(eM,{side:"top",align:"end",className:"w-80 bg-card/95 backdrop-blur-xl border border-border/50 shadow-2xl",children:(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 space-y-3",children:[(0,i.jsx)("h4",{className:"jsx-8ce17cf8c7e169b2 font-bold text-sm uppercase tracking-wider text-primary mb-3",children:"Keyboard Shortcuts"}),(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 space-y-2 text-sm",children:[(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 flex items-center justify-between py-1.5 border-b border-border/30",children:[(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 text-muted-foreground",children:"Move tile (if selected)"}),(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 bg-primary/20 px-2 py-0.5 rounded border border-primary/30 text-primary font-mono font-bold",children:"WASD"})]}),(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 flex items-center justify-between py-1.5 border-b border-border/30",children:[(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 text-muted-foreground",children:"Pan camera (no selection)"}),(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 bg-primary/20 px-2 py-0.5 rounded border border-primary/30 text-primary font-mono font-bold",children:"WASD"})]}),(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 flex items-center justify-between py-1.5 border-b border-border/30",children:[(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 text-muted-foreground",children:"Rotate tile"}),(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 bg-primary/20 px-2 py-0.5 rounded border border-primary/30 text-primary font-mono font-bold",children:"Q / E"})]}),(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 flex items-center justify-between py-1.5 border-b border-border/30",children:[(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 text-muted-foreground",children:"Change height"}),(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 bg-primary/20 px-2 py-0.5 rounded border border-primary/30 text-primary font-mono font-bold",children:"R / F"})]}),(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 flex items-center justify-between py-1.5 border-b border-border/30",children:[(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 text-muted-foreground",children:"Delete tile"}),(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 bg-destructive/20 px-2 py-0.5 rounded border border-destructive/30 text-destructive font-mono font-bold",children:"DEL"})]}),(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 flex items-center justify-between py-1.5 border-b border-border/30",children:[(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 text-muted-foreground",children:"Copy tile"}),(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 bg-primary/20 px-2 py-0.5 rounded border border-primary/30 text-primary font-mono font-bold",children:"Ctrl+C"})]}),(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 flex items-center justify-between py-1.5 border-b border-border/30",children:[(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 text-muted-foreground",children:"Paste tile"}),(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 bg-primary/20 px-2 py-0.5 rounded border border-primary/30 text-primary font-mono font-bold",children:"Ctrl+V"})]}),(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 flex items-center justify-between py-1.5 border-b border-border/30",children:[(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 text-muted-foreground",children:"Undo"}),(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 bg-primary/20 px-2 py-0.5 rounded border border-primary/30 text-primary font-mono font-bold",children:"Ctrl+Z"})]}),(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 flex items-center justify-between py-1.5 border-b border-border/30",children:[(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 text-muted-foreground",children:"Redo"}),(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 bg-primary/20 px-2 py-0.5 rounded border border-primary/30 text-primary font-mono font-bold",children:"Ctrl+Y / Ctrl+Shift+Z"})]}),(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 flex items-center justify-between py-1.5 border-b border-border/30",children:[(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 text-muted-foreground",children:"New map"}),(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 bg-primary/20 px-2 py-0.5 rounded border border-primary/30 text-primary font-mono font-bold",children:"Ctrl+N"})]}),(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 flex items-center justify-between py-1.5 border-b border-border/30",children:[(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 text-muted-foreground",children:"Open map"}),(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 bg-primary/20 px-2 py-0.5 rounded border border-primary/30 text-primary font-mono font-bold",children:"Ctrl+O"})]}),(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 flex items-center justify-between py-1.5",children:[(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 text-muted-foreground",children:"Save map"}),(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 bg-primary/20 px-2 py-0.5 rounded border border-primary/30 text-primary font-mono font-bold",children:"Ctrl+S"})]})]}),(0,i.jsx)(eA,{className:"my-3"}),(0,i.jsx)("h4",{className:"jsx-8ce17cf8c7e169b2 font-bold text-sm uppercase tracking-wider text-primary mb-3",children:"Mouse Controls"}),(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 space-y-2 text-sm",children:[(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 flex items-center justify-between py-1.5 border-b border-border/30",children:[(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 text-muted-foreground",children:"Select / Drag tile"}),(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 bg-primary/20 px-2 py-0.5 rounded border border-primary/30 text-primary font-bold",children:"LMB"})]}),(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 flex items-center justify-between py-1.5 border-b border-border/30",children:[(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 text-muted-foreground",children:"Multiple selection"}),(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 bg-primary/20 px-2 py-0.5 rounded border border-primary/30 text-primary font-bold",children:"Ctrl+LMB"})]}),(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 flex items-center justify-between py-1.5 border-b border-border/30",children:[(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 text-muted-foreground",children:"Copy tile (drag)"}),(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 bg-primary/20 px-2 py-0.5 rounded border border-primary/30 text-primary font-bold",children:"Ctrl+Drag"})]}),(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 flex items-center justify-between py-1.5 border-b border-border/30",children:[(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 text-muted-foreground",children:"Pan camera"}),(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 bg-primary/20 px-2 py-0.5 rounded border border-primary/30 text-primary font-bold",children:"MMB"})]}),(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 flex items-center justify-between py-1.5 border-b border-border/30",children:[(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 text-muted-foreground",children:"Rotate camera"}),(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 bg-primary/20 px-2 py-0.5 rounded border border-primary/30 text-primary font-bold",children:"RMB"})]}),(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 flex items-center justify-between py-1.5",children:[(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 text-muted-foreground",children:"Zoom"}),(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 bg-primary/20 px-2 py-0.5 rounded border border-primary/30 text-primary font-bold",children:"Wheel"})]})]})]})})]}),(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 flex-1 relative",children:[P&&(0,i.jsx)("div",{className:"jsx-8ce17cf8c7e169b2 absolute inset-0 bg-background/90 z-50 flex items-center justify-center font-bold uppercase tracking-widest",children:z}),(0,i.jsx)("canvas",{ref:r,onDragOver:e=>{e.preventDefault(),e.dataTransfer.dropEffect="copy"},onDrop:async e=>{if(e.preventDefault(),!N.current||!h.current||!r.current||!n.current)return;let t=r.current.getBoundingClientRect(),l=new d.Vector2((e.clientX-t.left)/t.width*2-1,-(2*((e.clientY-t.top)/t.height))+1),s=new d.Raycaster;s.setFromCamera(l,n.current);let i=s.intersectObjects(Array.from(p.current.values()),!0),o=null;if(i.length>0){let e=i[0].object,t=null;for(;e&&!t;){let r=Array.from(p.current.entries()).find(([t,r])=>r===e);r?t=r[0]:e=e.parent}if(t){let[e,r]=t.split("_")[0].split(",").map(Number);o={q:e,r}}}if(!o){let e=s.intersectObjects(a.current?.children.filter(e=>"__hitPlane"===e.name)||[]);e.length>0&&(o=tp(e[0].point.x,e[0].point.z))}if(o){let{q:e,r:t}=o;if(Q(N.current),"tiles"===eg){let r=$;if("roads"===eb?r=t2:"coast"===eb&&(r=t1),!Number.isFinite(e)||!Number.isFinite(t))return void console.error("Invalid coordinates from drop:",e,t);let a=J;for(;a<=4&&h.current.hasHex(e,t,a);)a++;if(a<=4){let n=new t6(e,t,r);n.modelData=N.current,n.height=a,h.current.setHex(e,t,n),await tH(e,t,a),e1(!0)}}else{let r=J;for(;r<=4&&h.current.hasHex(e,t,r);)r++;if(r<=4){let a=new t6(e,t,tX);a.modelData=N.current,a.height=r,h.current.setHex(e,t,a),await tH(e,t,r),e1(!0)}}}N.current=null},onClick:tz,onMouseMove:e=>{let t=e.clientX-el.current.x,r=e.clientY-el.current.y;if(et.current)em.current+=.01*t,eu.current=Math.max(.1,Math.min(Math.PI/2,eu.current+.01*r));else if(er.current){let e=em.current,a=new d.Vector3(-Math.cos(e),0,-Math.sin(e)),n=new d.Vector3(-Math.sin(e),0,Math.cos(e)),l=.001*ed.current;eh.current.add(n.multiplyScalar(t*l)),eh.current.add(a.multiplyScalar(r*l))}if(eo.current&&!ee.current&&h.current&&Math.sqrt(Math.pow(e.clientX-eo.current.x,2)+Math.pow(e.clientY-eo.current.y,2))>5){let e=eo.current.coords;e&&h.current.hasHex(e.q,e.r)&&(ee.current=!0,ea.current={q:e.q,r:e.r},en.current=!1)}ee.current&&(en.current=e.ctrlKey||e.metaKey),el.current={x:e.clientX,y:e.clientY},ei.current=tI(e)},onMouseDown:e=>{if(0===e.button){let t=tI(e);t&&h.current&&h.current.hasHex(t.q,t.r)?eo.current={x:e.clientX,y:e.clientY,coords:t}:eo.current=null}else 2===e.button?et.current=!0:1===e.button&&(er.current=!0)},onMouseUp:e=>{0===e.button||(ee.current=!1,en.current=!1,ea.current=null),eo.current=null,et.current=!1,er.current=!1},onMouseLeave:()=>{ee.current=!1,en.current=!1,ea.current=null,eo.current=null,et.current=!1,er.current=!1},onWheel:e=>{ed.current=Math.max(20,Math.min(500,ed.current+.1*e.deltaY))},onContextMenu:e=>e.preventDefault(),className:"jsx-8ce17cf8c7e169b2 w-full h-full outline-none cursor-crosshair"})]})]}),(0,i.jsx)(o.default,{id:"8ce17cf8c7e169b2",children:"::-webkit-scrollbar{width:4px}::-webkit-scrollbar-thumb{background:#333;border-radius:4px}"}),eK&&(0,i.jsx)("div",{className:"jsx-8ce17cf8c7e169b2 "+((0,ew.cn)("fixed bottom-6 right-6 z-[100] p-4 rounded-lg shadow-2xl border backdrop-blur-xl animate-in slide-in-from-bottom-4","success"===eK.type?"bg-green-500/90 border-green-400/50 text-white":"bg-red-500/90 border-red-400/50 text-white")||""),children:(0,i.jsxs)("div",{className:"jsx-8ce17cf8c7e169b2 flex items-center gap-2",children:["success"===eK.type?(0,i.jsx)(x,{size:20,weight:"fill"}):(0,i.jsx)(v,{size:20,weight:"fill"}),(0,i.jsx)("span",{className:"jsx-8ce17cf8c7e169b2 font-bold text-sm",children:eK.message})]})})]})}e.s(["default",()=>ra],51543)},77169,e=>{e.n(e.i(51543))}]);